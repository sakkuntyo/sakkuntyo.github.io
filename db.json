{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"source/readme.md","path":"readme.md","modified":0,"renderable":0},{"_id":"source/images/github-settings-keys2.png","path":"images/github-settings-keys2.png","modified":0,"renderable":0},{"_id":"source/images/laravel-dev-create.png","path":"images/laravel-dev-create.png","modified":0,"renderable":0},{"_id":"source/images/github-settings-keys.png","path":"images/github-settings-keys.png","modified":0,"renderable":0},{"_id":"source/images/github-settings.png","path":"images/github-settings.png","modified":0,"renderable":0},{"_id":"source/images/github-settings2.png","path":"images/github-settings2.png","modified":0,"renderable":0},{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/js/algolia-search.js","path":"js/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/bookmark.js","path":"js/bookmark.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/local-search.js","path":"js/local-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/motion.js","path":"js/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/next-boot.js","path":"js/next-boot.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/utils.js","path":"js/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/anime.min.js","path":"lib/anime.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/muse.js","path":"js/schemes/muse.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/schemes/pisces.js","path":"js/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1}],"Cache":[{"_id":"source/readme.md","hash":"1ab9f6c29725c1edbd8c1043e375f94c4bb88ecb","modified":1573747337062},{"_id":"themes/next/.all-contributorsrc","hash":"1eba597197a2044d93bff26e1c470723c73f06ad","modified":1573747337070},{"_id":"themes/next/.editorconfig","hash":"8570735a8d8d034a3a175afd1dd40b39140b3e6a","modified":1573747337070},{"_id":"themes/next/.eslintrc.json","hash":"cc5f297f0322672fe3f684f823bc4659e4a54c41","modified":1573747337070},{"_id":"themes/next/.gitattributes","hash":"a54f902957d49356376b59287b894b1a3d7a003f","modified":1573747337070},{"_id":"themes/next/.gitignore","hash":"7b68ca7a46104cf9aa84ec0541a4856ab1836eca","modified":1573747337074},{"_id":"themes/next/.stylintrc","hash":"2cf4d637b56d8eb423f59656a11f6403aa90f550","modified":1573747337074},{"_id":"themes/next/.travis.yml","hash":"3d1dc928c4a97933e64379cfde749dedf62f252c","modified":1573747337074},{"_id":"themes/next/LICENSE.md","hash":"18144d8ed58c75af66cb419d54f3f63374cd5c5b","modified":1573747337074},{"_id":"themes/next/README.md","hash":"e0fcd99c0a6db47fe5739df32d6ab39c44c65196","modified":1573747337074},{"_id":"themes/next/_config.yml","hash":"7a582f5cdc3b90cfcc1ea8c4e405c73b15b1f6d8","modified":1573747337074},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1573747337074},{"_id":"themes/next/gulpfile.js","hash":"94e80ca87826b90744618b00d08bc7e5eefbaef4","modified":1573747337074},{"_id":"themes/next/package.json","hash":"04cdcb7cb13a4d21739b49babd93e01ad5da24c3","modified":1573747337082},{"_id":"source/_drafts/Microsoft製-Androidタブレットを作成する.md","hash":"c2786b549ec570a893015b935fc189aad80340e7","modified":1573747337054},{"_id":"source/_drafts/VDIでAndroidを起動する.md","hash":"7821705493c3509e6f227a312f2c0a8afa29444a","modified":1573747337058},{"_id":"source/_drafts/【2019年秋】RyzenとCore-iシリーズ比較.md","hash":"fecc34dbd183c266bd7dd93527b90ae614b4ee4c","modified":1573747337058},{"_id":"source/_posts/git-howto-simple.md","hash":"a3aa4d6fcd702b70afb016fcd3bcdcc3caa0980e","modified":1573747337058},{"_id":"source/_posts/github-addkey.md","hash":"b2731acf059bfe0f3ef8acf14592d35b1e940365","modified":1573747337058},{"_id":"source/_posts/initrd-unpack-edit-compress.md","hash":"e74486689202300351dc1b330c4aec0933be0d26","modified":1573747337058},{"_id":"source/_posts/laravel-build-develop-environment-debian.md","hash":"0515dc702547571ab1d38738e11628eaaa399c28","modified":1573747337058},{"_id":"source/_posts/linux-debian-time-adjustment.md","hash":"7cc591e40127e10e20561720a8961b3672d4bf6c","modified":1573749882644},{"_id":"source/_posts/vagrant-up-mint19-desktop.md","hash":"6950c12018932d3f786669ed7d32806cbbedb325","modified":1573747337058},{"_id":"source/images/github-settings-keys2.png","hash":"c58ca309336676cbb3cff068a25d240a37415c15","modified":1573747337058},{"_id":"source/images/laravel-dev-create.png","hash":"72e11e0a9fdcc00c4081688d39c7ccf05d496970","modified":1573747337062},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"c149f003d03501565e7688915cd8f2e99fbf8f42","modified":1573747337070},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"c62433b1746823d0f09b671d0b12a42d2300e768","modified":1573747337074},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"2a4ff75ccb91d9001032c08e22489096b850bf4f","modified":1573747337074},{"_id":"themes/next/.github/auto_assign.yml","hash":"cb68a1dca1c4623448c2ca899614a9f21df1b036","modified":1573747337074},{"_id":"themes/next/.github/config.yml","hash":"8a5cbf5aa9529390fe0a782758aca9c3a02f9dcf","modified":1573747337074},{"_id":"themes/next/.github/eslint-disable-bot.yml","hash":"16541fb7b80f5ab90135db96285badb63c4d7d3e","modified":1573747337074},{"_id":"themes/next/.github/issue_label_bot.yaml","hash":"b09c85aa449f46bc025317ed196ec33a877f7c23","modified":1573747337074},{"_id":"themes/next/.github/lock.yml","hash":"585d2c471047be320aa62f2b74dad797bf09c530","modified":1573747337074},{"_id":"themes/next/.github/mergeable.yml","hash":"0ee56e23bbc71e1e76427d2bd255a9879bd36e22","modified":1573747337074},{"_id":"themes/next/.github/release-drafter.yml","hash":"3cc10ce75ecc03a5ce86b00363e2a17eb65d15ea","modified":1573747337074},{"_id":"themes/next/.github/stale.yml","hash":"941209526c2f7d916c76163c9e1ac1af9d956679","modified":1573747337074},{"_id":"themes/next/.github/support.yml","hash":"d75db6ffa7b4ca3b865a925f9de9aef3fc51925c","modified":1573747337074},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1573747337074},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"20f8a3d7db6e797a5a3ed8c84837315cb8e09e5b","modified":1573747337074},{"_id":"themes/next/docs/AUTHORS.md","hash":"87d5bf72b7be09e9e7cf8d0036b2c81fbfbe7069","modified":1573747337074},{"_id":"themes/next/docs/DATA-FILES.md","hash":"a85ae0f3a9655eea9acd3f6209b72eb002f2058d","modified":1573747337074},{"_id":"themes/next/docs/INSTALLATION.md","hash":"5385246ab4756e3e26ec9fe1f6a6759812177cc4","modified":1573747337074},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"1fb2c852fad03b73882069f1ec0659db2e1f2da0","modified":1573747337074},{"_id":"themes/next/docs/LICENSE.txt","hash":"368bf2c29d70f27d8726dd914f1b3211cae4bbab","modified":1573747337074},{"_id":"themes/next/docs/MATH.md","hash":"aa90364b1ac069b4f8cfdb48b4879311856224e6","modified":1573747337074},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"a07ca23c38f6e4dddd4b74016b30e88cd3796f75","modified":1573747337074},{"_id":"themes/next/layout/_layout.swig","hash":"a40f054f4013463f01d61f9b71b47f536fc6a75c","modified":1573747337078},{"_id":"themes/next/layout/archive.swig","hash":"238583e6b5c5c03624d859f0f22294059937defe","modified":1573747337082},{"_id":"themes/next/layout/category.swig","hash":"fe34f1a67b429fd40909c2e01689a83e7fe7e7cc","modified":1573747337082},{"_id":"themes/next/layout/index.swig","hash":"5bad87bfe875a403a76ea0b56139f5e7d1841fd0","modified":1573747337082},{"_id":"themes/next/layout/page.swig","hash":"623c5873eccf1e842ec4fa1eaac0614f235bb50f","modified":1573747337082},{"_id":"themes/next/layout/post.swig","hash":"5c14c9ece50c423c761f73b2001f28c4f21f665b","modified":1573747337082},{"_id":"themes/next/layout/tag.swig","hash":"60d92af61fa0087cbdd4decf590b9f7c111d1abe","modified":1573747337082},{"_id":"themes/next/languages/de.yml","hash":"3d8920676d89494d7d1c74d4238680151ea6d9df","modified":1573747337074},{"_id":"themes/next/languages/default.yml","hash":"c13eda783f8717c62b7ad9e8a9b724314ae74e1a","modified":1573747337074},{"_id":"themes/next/languages/en.yml","hash":"c13eda783f8717c62b7ad9e8a9b724314ae74e1a","modified":1573747337074},{"_id":"themes/next/languages/es.yml","hash":"7dc1d7d5ea1078ee3b9bc8e0e8d0f15f52a7a4aa","modified":1573747337074},{"_id":"themes/next/languages/fa.yml","hash":"269b5cb70774485d7dbbcf98eec72c9e84e135b2","modified":1573747337074},{"_id":"themes/next/languages/fr.yml","hash":"dfdcfa536c40d06125dff373d042c50e08fcafd8","modified":1573747337074},{"_id":"themes/next/languages/hu.yml","hash":"e4a5f43fb45acd992def3de3b600aa4df4c95ed7","modified":1573747337074},{"_id":"themes/next/languages/id.yml","hash":"5665dece8435964a27b5061d7283f339f84721f0","modified":1573747337074},{"_id":"themes/next/languages/it.yml","hash":"311597c620059dbb99474f19b2110a4485ecf70b","modified":1573747337078},{"_id":"themes/next/languages/ja.yml","hash":"4f929842b3d6aaed709ea99da679d3910ee184e5","modified":1573747337078},{"_id":"themes/next/languages/ko.yml","hash":"5f5194dd0f5a3c8484e7668bce6fbe23340e531a","modified":1573747337078},{"_id":"themes/next/languages/nl.yml","hash":"561c77ca68e9d51a5ce8c89d3361fdb033c96bba","modified":1573747337078},{"_id":"themes/next/languages/pt-BR.yml","hash":"13b579911e44a8b213e1860f9a50c341be1bf95e","modified":1573747337078},{"_id":"themes/next/languages/pt.yml","hash":"af9d9b581dca45ab9789ca41d3492883a911e383","modified":1573747337078},{"_id":"themes/next/languages/ru.yml","hash":"b485c57dd7b447406dafd0dcfdfc9356266708c9","modified":1573747337078},{"_id":"themes/next/languages/tr.yml","hash":"39caf8a3677fd6dfbd523e73f8482a509e87b603","modified":1573747337078},{"_id":"themes/next/languages/uk.yml","hash":"4cbdbb0ed09487c9b435be21ac35f62182f53283","modified":1573747337078},{"_id":"themes/next/languages/vi.yml","hash":"3c6bb816ee7278afcddac06998c9ebe47ee19aef","modified":1573747337078},{"_id":"themes/next/languages/zh-CN.yml","hash":"e92e1e07a89c9fab27f445f9ec0fa35049fef38c","modified":1573747337078},{"_id":"themes/next/languages/zh-HK.yml","hash":"93d10d6e448c519004b09b11fba980b5036c93af","modified":1573747337078},{"_id":"themes/next/languages/zh-TW.yml","hash":"ae2aa1c6ec1a5a01a3a3bde17bcc3a82f9a35fa7","modified":1573747337078},{"_id":"source/images/github-settings-keys.png","hash":"2d180f8334de1db26ff75d7efe56098404577cae","modified":1573747337058},{"_id":"source/images/github-settings.png","hash":"46e86aa2d811133455ad8d5090b08c8e2b6540cc","modified":1573747337058},{"_id":"source/images/github-settings2.png","hash":"a42afcecd8d35c6b8072242ab23730f389f9c982","modified":1573747337062},{"_id":"themes/next/.github/ISSUE_TEMPLATE/custom-issue-template.md","hash":"b28c02cd246f3fe0352b75729c52c5931c8ac84f","modified":1573747337074},{"_id":"themes/next/.github/ISSUE_TEMPLATE/bug-report.md","hash":"c0b9e8a851016da44d9479539dd0b1270fe75571","modified":1573747337074},{"_id":"themes/next/.github/ISSUE_TEMPLATE/feature-request.md","hash":"3b27149a4f9ed002ca84483f95ed558470a32b31","modified":1573747337074},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"67d04e3e29a2675d1a9f87d1ae6ea0769e963ff1","modified":1573747337074},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"6c5d69e94961c793da156217ecf1179e868d7ba1","modified":1573747337074},{"_id":"themes/next/docs/ru/README.md","hash":"3ceab62de4db29e2257dd5a187c7f8731a207f84","modified":1573747337074},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"b1dd18d9b890b21718883ea1832e7e02a773104a","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"5ad2c2d0a11443a03b3fd912925bc0dcfbcda88c","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"0dfb458370a0ffbbe37c00f53c15e3aa3e79b125","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"80524da09eb2061a5b6202a34df6cabb6043c120","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"c46f3f7496fc422207cc5954e10a2bc972b650aa","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"c13546dd70a99a7d2d409cddf5d59f2f4d4d44a4","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"8ceaad956a1afedf179b2e0b98a67adee9afec08","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"a658a72589738e11aefaa3a714b188ffd5aac822","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/README.md","hash":"0981aaf68145a05b02cd10c95d38cbaf97622944","modified":1573747337074},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"4ee0607ddcfb2fe0e5868aced6d5814d1ada4405","modified":1573747337074},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"43572a13a654aed5b5123c6adda4d5c3f2883cb8","modified":1573747337078},{"_id":"themes/next/layout/_macro/post.swig","hash":"325a6008de86f993405fa234f1344c19d7aa3cd5","modified":1573747337078},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"99e808c3d132badd6a932943c862dd8e330615bc","modified":1573747337078},{"_id":"themes/next/layout/_partials/comments.swig","hash":"e0f59221b6010bd3e05d34fac915556f51b8a458","modified":1573747337078},{"_id":"themes/next/layout/_partials/footer.swig","hash":"9d9a5d6a2f0d4f65fe57c3737c91ecaf276c1f5c","modified":1573747337078},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"b9d3f6534efb9e637ac46318fa07c2e5607bf830","modified":1573747337078},{"_id":"themes/next/layout/_partials/post-edit.swig","hash":"4b0c972c44bfa7ab07604280563deb9cc3974657","modified":1573747337078},{"_id":"themes/next/layout/_scripts/index.swig","hash":"cea942b450bcb0f352da78d76dc6d6f1d23d5029","modified":1573747337078},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"e08feac6f8904d7f2006e350514a2f07eb9fff44","modified":1573747337078},{"_id":"themes/next/layout/_scripts/pjax.swig","hash":"105004ddcc7fe9f4fd7ad1007b628ba8c08c1e27","modified":1573747337078},{"_id":"themes/next/layout/_scripts/three.swig","hash":"10cb2740877086b673a0e03a16bbdeee951caa56","modified":1573747337078},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"9499cb319f76246e4627c534e486ff8bd70e159f","modified":1573747337078},{"_id":"themes/next/layout/_third-party/baidu-push.swig","hash":"8627c8c8b031ecee16c522433b66fa4d6979b8ea","modified":1573747337078},{"_id":"themes/next/layout/_third-party/facebook-sdk.swig","hash":"3cf1a1a83ceddef4033a2964150f81b979ced6ff","modified":1573747337078},{"_id":"themes/next/layout/_third-party/index.swig","hash":"32e4fe8dd8b3c40a17314569d1a14bde55251074","modified":1573747337078},{"_id":"themes/next/layout/_third-party/quicklink.swig","hash":"65f94b115c42d33e6a90b1f8e62075c6d4ac60c1","modified":1573747337082},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"da6a9d14ed10203e378c6e2c00a7b5e7afabca58","modified":1573747337082},{"_id":"themes/next/layout/_third-party/vkontakte-api.swig","hash":"e0d012bdbae5545d90143030116114c34219bd37","modified":1573747337082},{"_id":"themes/next/scripts/events/index.js","hash":"a25690d8b03779f7e318108c8eace9baf6d4283a","modified":1573747337082},{"_id":"themes/next/scripts/filters/default-injects.js","hash":"834599d2b83f06e90f8cf618cddc106fe900ba5c","modified":1573747337082},{"_id":"themes/next/scripts/filters/excerpt.js","hash":"827c3733fa14b018dd1f07e41686c207880e823a","modified":1573747337082},{"_id":"themes/next/scripts/filters/exturl.js","hash":"9c32675f64121ffbe454189b8e418b408f79d9c2","modified":1573747337082},{"_id":"themes/next/scripts/filters/lazyload.js","hash":"51672320fff6b39f56fe6a2881c611afe4e79b8e","modified":1573747337082},{"_id":"themes/next/scripts/filters/minify.js","hash":"19985723b9f677ff775f3b17dcebf314819a76ac","modified":1573747337082},{"_id":"themes/next/scripts/helpers/engine.js","hash":"896a581feb9432e58a325ad04d66d6310a12374e","modified":1573747337082},{"_id":"themes/next/scripts/helpers/font.js","hash":"53169e2d04f0c21e68beb07c212be0a6c2a9aaea","modified":1573747337082},{"_id":"themes/next/scripts/helpers/next-inject.js","hash":"33eb6f38de575b973fed237032c34d878594fdc1","modified":1573747337082},{"_id":"themes/next/scripts/helpers/next-js.js","hash":"b28a8ed6d033946acbb5b91f6d8b884857410dd9","modified":1573747337082},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"18f879fb8227c6dc58b919c437fe61db61969caa","modified":1573747337082},{"_id":"themes/next/scripts/helpers/next-vendors.js","hash":"d512f44195f68b0ff93f3c82afff9161cdf1b7d6","modified":1573747337082},{"_id":"themes/next/scripts/tags/button.js","hash":"1d1d25f7e579d92fa563778dd0f163e8eda190da","modified":1573747337082},{"_id":"themes/next/scripts/tags/caniuse.js","hash":"20e392b8583ba6ae5037449c2c7e191d3927641b","modified":1573747337082},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"f13430d9d1c9773b390787c2f046bb1f12a79878","modified":1573747337082},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"8fc05f22b88553bc1d96e0c925799cd97920fc6a","modified":1573747337082},{"_id":"themes/next/scripts/tags/include-raw.js","hash":"60f880c1e11a7df1aee4f2e01d65451fecc0372c","modified":1573747337082},{"_id":"themes/next/scripts/tags/label.js","hash":"fc5b267d903facb7a35001792db28b801cccb1f8","modified":1573747337082},{"_id":"themes/next/scripts/tags/mermaid.js","hash":"983c6c4adea86160ecc0ba2204bc312aa338121d","modified":1573747337082},{"_id":"themes/next/scripts/tags/note.js","hash":"0a02bb4c15aec41f6d5f1271cdb5c65889e265d9","modified":1573747337082},{"_id":"themes/next/scripts/tags/pdf.js","hash":"f780cc72bff91d2720626e7af69eed25e9c12a29","modified":1573747337082},{"_id":"themes/next/scripts/tags/tabs.js","hash":"00ca6340d4fe0ccdae7525373e4729117775bbfa","modified":1573747337082},{"_id":"themes/next/scripts/tags/video.js","hash":"e5ff4c44faee604dd3ea9db6b222828c4750c227","modified":1573747337082},{"_id":"themes/next/source/css/main.styl","hash":"68c3377b643162aeaae2b60c196486fdb3b509c3","modified":1573747337086},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1573747337086},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"910e4daf6c96b026ed56df788c675229d5b0178a","modified":1573747337086},{"_id":"themes/next/source/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1573747337086},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1573747337086},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1573747337090},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1573747337090},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1573747337090},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1573747337090},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1573747337090},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1573747337090},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"18cad54ace3fe10da978ecd487d5c98be35c600f","modified":1573747337090},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"ee4ce828a1ebd14c0b7546fd7c9ea091af1c199b","modified":1573747337090},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1573747337090},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1573747337090},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1573747337090},{"_id":"themes/next/source/js/algolia-search.js","hash":"813afcc30feee11d59f297f2d5a96f98fbbd4743","modified":1573747337090},{"_id":"themes/next/source/js/bookmark.js","hash":"60cab6771a57c268da331920edd6d7fcd2713d42","modified":1573747337090},{"_id":"themes/next/source/js/local-search.js","hash":"0579159bf994e3726b3ba063e5905f79465fdfb1","modified":1573747337090},{"_id":"themes/next/source/js/motion.js","hash":"71e5caff1d87b1b7256f61e6b318bedf495f9e75","modified":1573747337090},{"_id":"themes/next/source/js/next-boot.js","hash":"a6a82905c6abb8e0ec418ef6b0509b946b955807","modified":1573747337090},{"_id":"themes/next/source/js/utils.js","hash":"33a76cda8ecad2bea9db13e1f77c6e22fd6452fe","modified":1573747337090},{"_id":"themes/next/source/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1573747337090},{"_id":"themes/next/layout/_partials/widgets.swig","hash":"58f12810a730ba8e3129c9b0d1a7cce42ac6f2d2","modified":1573747337078},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1573747337086},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1573747337086},{"_id":"themes/next/layout/_partials/analytics/busuanzi-counter.swig","hash":"d7258d02bcf0dac6c0fd8377c0909ddecb09d1d4","modified":1573747337078},{"_id":"themes/next/layout/_partials/analytics/cnzz-analytics.swig","hash":"a17ace37876822327a2f9306a472974442c9005d","modified":1573747337078},{"_id":"themes/next/layout/_partials/analytics/firestore.swig","hash":"67e63c25d509f02a6057ee9724f1b6efd647f72f","modified":1573747337078},{"_id":"themes/next/layout/_partials/analytics/index.swig","hash":"ac6a3995c1330d2d73300b2427006509d0f8dba5","modified":1573747337078},{"_id":"themes/next/layout/_partials/analytics/lean-analytics.swig","hash":"fb7729b69ef443db1f3f2755506ee998cfe4b973","modified":1573747337078},{"_id":"themes/next/layout/_partials/analytics/tencent-analytics.swig","hash":"493a1ef6c8f475d4dd3156a6ab37690dc75695ea","modified":1573747337078},{"_id":"themes/next/layout/_partials/analytics/tencent-mta.swig","hash":"198813a3f382bda4278fe3759bf0f18a5769bb33","modified":1573747337078},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"0edd29b972aceecccb65b3e63d79c01f6639d0c5","modified":1573747337078},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"6236a874b93ac1be56fc21df8534a7ae8acffcfc","modified":1573747337078},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"7487ca8f0e4b16351ea0d6b35dc52b0d32176d57","modified":1573747337078},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"e0767e09a632264f189570e95ccf70fb1dad9110","modified":1573747337078},{"_id":"themes/next/layout/_partials/header/menu-item.swig","hash":"6da15fe72f7b6ebe2c510f5c773f30ea0133fb0a","modified":1573747337078},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"bfd55f4ef59dc5e88a7c45eb709021528fcf2b51","modified":1573747337078},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"02a4706ce7ed6f6d2f660948a74e9e8cd6dfa1fd","modified":1573747337078},{"_id":"themes/next/layout/_partials/page/breadcrumb.swig","hash":"c851717497ca64789f2176c9ecd1dedab237b752","modified":1573747337078},{"_id":"themes/next/layout/_partials/page/page-header.swig","hash":"d3c25d70f0fd76121e4cacb9f8af4ccbe2a3c74d","modified":1573747337078},{"_id":"themes/next/layout/_partials/post/post-copyright.swig","hash":"b68ccb90e2ee42bd98c93fc030a29d38689dd55c","modified":1573747337078},{"_id":"themes/next/layout/_partials/post/post-footer.swig","hash":"b654d63d2ed221a8b642223e220392e5172d8f4d","modified":1573747337078},{"_id":"themes/next/layout/_partials/post/post-related.swig","hash":"f05225f7d0ada3853c425899b515056b96ca49bf","modified":1573747337078},{"_id":"themes/next/layout/_partials/post/post-reward.swig","hash":"90a0869c6cc351d92fc97bf42fdc6e1bfa6bc513","modified":1573747337078},{"_id":"themes/next/layout/_partials/post/wechat-subscriber.swig","hash":"2edfaf1579ea58e15cb5583fb7962dfee9af2257","modified":1573747337078},{"_id":"themes/next/layout/_partials/search/algolia-search.swig","hash":"7fa01334a0ba84500e920bb9202baa08067d2ee1","modified":1573747337078},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"d6fa9e4432b87004c5678dfe2d4b2c1f4a702b93","modified":1573747337078},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"733d6874aa4f50d1071e670a554508a5a0094eb3","modified":1573747337078},{"_id":"themes/next/layout/_partials/sidebar/site-overview.swig","hash":"381f6a88d117293d6e0fe53c43ee30fc71caf817","modified":1573747337078},{"_id":"themes/next/layout/_scripts/pages/schedule.swig","hash":"9e44c795565837ba318fd739e42713de365673fd","modified":1573747337078},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"ffc8e8836714ea79abeb77b75859634615652877","modified":1573747337078},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"108b157fbd1ac3baaf19ae87234fa8728ab79556","modified":1573747337078},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"7f14ef43d9e82bc1efc204c5adf0b1dbfc919a9f","modified":1573747337078},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"1c910fc066c06d5fbbe9f2b0c47447539e029af7","modified":1573747337078},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"7fd0459d2f1cfe1254f2c2b8087dc094c8cb0e84","modified":1573747337078},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"4790058691b7d36cf6d2d6b4e93795a7b8d608ad","modified":1573747337078},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"9f73476ebcf5cd3b7f55525b3f35dc7e9f01e154","modified":1573747337078},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"42aa3022f7739a552c7a55de316d8c0994b2fdc1","modified":1573747337078},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"20fcbed44aede1b908bd17d7a0279b03639068b1","modified":1573747337078},{"_id":"themes/next/layout/_third-party/chat/chatra.swig","hash":"fdcf006e1ba2e53eab65e901b6c63159538307ef","modified":1573747337078},{"_id":"themes/next/layout/_third-party/chat/index.swig","hash":"5ab4a8b4306c837d2f8c211a9d7fdaed76fa254d","modified":1573747337078},{"_id":"themes/next/layout/_third-party/chat/tidio.swig","hash":"cba0e6e0fad08568a9e74ba9a5bee5341cfc04c1","modified":1573747337078},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"1130b8bd60f3b84397974486e6586d7f0afaf836","modified":1573747337078},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"86092b31761948486ecb379eb7445f66a158769d","modified":1573747337078},{"_id":"themes/next/layout/_third-party/comments/disqusjs.swig","hash":"df8413cba22deffca94cf4edd6d9f8d35d2bb58f","modified":1573747337078},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"261c4f1ab42f692279a310943b807ed34516df7c","modified":1573747337078},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"6f95bc4d7ffaddc3c0df0ef3eeeaac58ff83f560","modified":1573747337078},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"6fbf4cca91ad4ca150b1ea38d562f4bd7ba4c340","modified":1573747337078},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"bc23c9eb9c06b0b377695f44373c14c5cde1d0e3","modified":1573747337078},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"b9d7a99534e9c2608765b958eae3b5c50f5e4889","modified":1573747337078},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"dff6835d0b03ecc2db6919ca27cfb7b63949e6a8","modified":1573747337082},{"_id":"themes/next/layout/_third-party/search/algolia-search.swig","hash":"ad7a22ee0f183481c7843ecd881b9f9e8e037e31","modified":1573747337082},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"b2fd17688f0433571b37704bc8df798e175e7811","modified":1573747337082},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"767b6c714c22588bcd26ba70b0fc19b6810cbacd","modified":1573747337082},{"_id":"themes/next/layout/_third-party/search/swiftype.swig","hash":"ba0dbc06b9d244073a1c681ff7a722dcbf920b51","modified":1573747337082},{"_id":"themes/next/layout/_third-party/tags/index.swig","hash":"83d0a8f71878c6b96a04ba08567b9064de6cce83","modified":1573747337082},{"_id":"themes/next/layout/_third-party/tags/mermaid.swig","hash":"a54308f934c33b12f6bf28e4ce90e517f38cab57","modified":1573747337082},{"_id":"themes/next/layout/_third-party/tags/pdf.swig","hash":"7597800b6ce2f545baea797d95d1b8c7cf624299","modified":1573747337082},{"_id":"themes/next/scripts/events/lib/config.js","hash":"b710d896fccd34657a70244645470e476a4e069f","modified":1573747337082},{"_id":"themes/next/scripts/events/lib/injects-point.js","hash":"6661c1c91c7cbdefc6a5e6a034b443b8811235a1","modified":1573747337082},{"_id":"themes/next/scripts/events/lib/injects.js","hash":"2a5f7c7e507bb354ec05a881bc9a1f4f2f28197c","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/changyan.js","hash":"3ac62f5510f22e9d970089bb01f96ba2134ae161","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/common.js","hash":"0803d4f4d3d02c24417c163ad0b27b60fda79250","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/default-config.js","hash":"7f2d93af012c1e14b8596fecbfc7febb43d9b7f5","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/disqus.js","hash":"ccfac51bde0063ab7ef88182f8cbc98c210e78c9","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/disqusjs.js","hash":"178c4618b29a1e06221285146071e72e24c40499","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/facebook-comments-plugin.js","hash":"e3c74b24f3818f2504fd0c7a954adaa6681bb969","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/gitalk.js","hash":"e51dc3072c1ba0ea3008f09ecae8b46242ec6021","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/livere.js","hash":"3c4bdc2a682f9889a532e1cb856bc5caeb4208e1","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/valine.js","hash":"e34d38aee93558b2c68a7fa6203c2e4806405d62","modified":1573747337082},{"_id":"themes/next/scripts/filters/comment/vkontakte.js","hash":"031337c2e2157628a15a5f4d96fa6e3fcf2733fe","modified":1573747337082},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2315dd8a7a2c7aabd29efa6193df08e805cb15fc","modified":1573747337086},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"644c1f0b02be9bf59955ebdf496136b3fa4b660b","modified":1573747337086},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"0a25f3df1b5c39794365efde387647da81da884a","modified":1573747337086},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"52550138127ae9ebbe049bcdacd94d767c003855","modified":1573747337086},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"b9d7058db61df7bbd2b58779efe45621a06ffc18","modified":1573747337086},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"c261d685c5ed0df34718d94bb2ba977c0ed443e6","modified":1573747337086},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"50bc57e66331c0f15a4527010b4ca3316ac92403","modified":1573747337086},{"_id":"themes/next/source/css/_variables/base.styl","hash":"f99be76f2c72368cc5fbdafc02b676513de17e1e","modified":1573747337086},{"_id":"themes/next/source/js/schemes/muse.js","hash":"a0f4bbb965867ff4b0a09df6c50e927d707a753c","modified":1573747337090},{"_id":"themes/next/source/js/schemes/pisces.js","hash":"1e47ffdda23f7f645a2a883a90e2e9d9ddbf9a46","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1573747337090},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1573747337094},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1573747337094},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"cda066b495a4b6b10c7bc88b2a9b82722156b66b","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"e0db0d9205cd47c48edba81c7397e09ed24783fa","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"65a38b8a443c7da0f9492d10b3d9c9bf1e82c649","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/rainbow.styl","hash":"8e9deaf1e0a27d5bf5f0401bf04f5637df12b6c4","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/reading-progress.styl","hash":"0dd11537a4b9a4d2faf3ad5cdae0f0f770a99ccf","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/scrollbar.styl","hash":"202ee1f1f8e64d8292df16f40ee176ff4e5d7e71","modified":1573747337082},{"_id":"themes/next/source/css/_common/outline/mobile.styl","hash":"990bd301ce2de0a6b936781c58318f3945d81bc2","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"253be42759a997fa7e63e79d43f6fe432055d1f4","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"f4c09c704448257ba034e932abeaf630a5c0c4e5","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/buttons.styl","hash":"1df11aefe6ec824973affe42fda3660f29781613","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/comments.styl","hash":"3faa8a7cdb05ef3f3b02920d381773dfd54270a5","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"4f7140cc0db08b47a25c4c7aad71047d433051a1","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/pagination.styl","hash":"48df8ba940038b5f6c8496f27a091f90d61f1263","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"523fb7b653b87ae37fc91fc8813e4ffad87b0d7e","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"4ddbc8b2dba6fad900c5eca793a31f18ba850f5a","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/toggles.styl","hash":"03b95661d365252721b0c673b736a7a3e5e0c894","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"eb8f4c0960b9720f721ae4705088b9c11ebc7ba9","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"71d75fa309cf5b96d876da536f57c047e57afcff","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"87d19a45db10689aae9a09736efd1eb896a35b3d","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"3462ffd270f3e218e0a8362262466e79d731f975","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"991bef91bbff50850729156bacb9070a1dd90d16","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expand.styl","hash":"aaa7aeb01e2f6db2e5ac404ac06d71725ff83fa3","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"c6560cfb2f720dc8179a3a5785415baa5c6b1f2d","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"aab4583b237f7d2e7a49f702793ad32b80e833b5","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"3646e915b0a55f3b66e41d802b082aba88a76e06","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"29b32951d7b41b09c5d33325f01519779c8847b1","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Muse/_sidebar.styl","hash":"eeab294e14abbae231107e1a327e907b25323136","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"41b1d10a530913908e026fd991216e234766d148","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"f1f81bca31e82ccbd375f0cb9fb8dbb3beac810d","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"7ea9f7970cb779920b184ac35c364c5c7456cda0","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"d221cc1dc78f9a4a17c8376cd0b5145f9fe9a335","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"fcc6c42d7976a531f054c05b2d3d4ccf861a8107","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"e2d8d1f393dbf0ae0960ce9944ad89fba804ce74","modified":1573747337086},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"10b4794ba62726fc052c74d786d962ed79d0780b","modified":1573747337086},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1573747337090},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1573747337094},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"fafc96c86926b22afba8bb9418c05e6afbc05a57","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"2bd0eb1512415325653b26d62a4463e6de83c5ac","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"7504dbc5c70262b048143b2c37d2b5aa2809afa2","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"bd24ba69935effe204795ed6fad7ab54e140ee4a","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/pages/tag-cloud.styl","hash":"7ddb7453bf9b85b01bff136e9d10a7f06baac9e8","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"8efce700b8113ff39e9a696d5b3dfdc644e7ee7d","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"ac2105c5a7f581b1c0f2b59f2c0c3e87a7c28383","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"4735c5a76d12713f35d06e2f4d539919ca2196db","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"602a3c3d2785965b23412b5c219dfe74b5fb0844","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"caa9a78993d549117cdc8fa7a76c473a5e7f0f67","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-header.styl","hash":"f748c264b46d4a118d59c8ad797bb47df67ffa0e","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"2e2a09dddd2a394a635bcefb6207b6cddcb784c7","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"541d6257023915a7caca7540f12cdf283ce025f3","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"f5c2788a78790aca1a2f37f7149d6058afb539e0","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"469d5e4e188f484abff24eddd5640fa4d4d77ed1","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"8b6481a0ac60007cf3defa3c9d85a6e412c91d6e","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"5248880398c1318624bdab95109c1c9fdb8eec02","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"8a7fc03a568b95be8d3337195e38bc7ec5ba2b23","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/third-party/math.styl","hash":"ef66c0a08e4243a25e41408d70ca66682b8dcea1","modified":1573747337082},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"e2992846b39bf3857b5104675af02ba73e72eed5","modified":1573747337086},{"_id":"themes/next/source/css/_common/components/third-party/search.styl","hash":"38ce7d692b8bc6fde02e3271dfd50ad37e107e4e","modified":1573747337086},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"4525465f40f82bd66e5f34e986440c75a9e2d2b2","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/footer/footer.styl","hash":"d7a4cc66dde4789bf208f8a0dec0e4a19945f3a6","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/bookmark.styl","hash":"e02b1097a72a7d2ddc45ea8d53aa6d77c25ac407","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/github-banner.styl","hash":"a475ca66b201b21a7c4022006743b3a79098829d","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/header.styl","hash":"b98ba750be29c09784ff337f9e2a6e7a062aa3c0","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/menu.styl","hash":"ec4acfafef2054173e173959cf5da6d0448c7c12","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/headerband.styl","hash":"0caf32492692ba8e854da43697a2ec8a41612194","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/site-meta.styl","hash":"a35cce63504df289a0847a6d827e5a0885e7fe4a","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/header/site-nav.styl","hash":"b5ba1b3d5535ccf1e5df6f4cd8ee0147d7278be9","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author-links.styl","hash":"2ef546b4cfa5038ebb050c592c5135bbeb51af41","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-author.styl","hash":"9b3ff4aa24069eab0e9771437013f45e450d4217","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-blogroll.styl","hash":"95339b71ac90553fb1634c536c9749055e0c788a","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-button.styl","hash":"41ccae779f918e6f9f5f625789a7360f1362454c","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-dimmer.styl","hash":"d055f8420583c7a009818dcdfaada592308bd628","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-nav.styl","hash":"f3108a247549fbdf11071d023add3f1b34ad2b23","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toc.styl","hash":"728ddfaf0959e1ec6cee3fea0e69d13cf817eb25","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar-toggle.styl","hash":"6ce78b92aa58e41c0e5c4f742d812eb74ad965c1","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/sidebar.styl","hash":"17c3f58fb84453603621d6a718fcc821c8d6bced","modified":1573747337086},{"_id":"themes/next/source/css/_common/outline/sidebar/site-state.styl","hash":"02e5a998748a67fa885fb06fae242bcf3f2786fb","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/highlight/copy-code.styl","hash":"2124abd41b69ff152f4bb39e78d8fbce96a45c65","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/highlight/diff.styl","hash":"d3f73688bb7423e3ab0de1efdf6db46db5e34f80","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/highlight/highlight.styl","hash":"4efe9174369bfe2125bd167feac18a07271635d6","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/highlight/theme.styl","hash":"3b3acc5caa0b95a2598bef4eeacb21bab21bea56","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/blockquote-center.styl","hash":"0527bc64708a9446dc7bbb2c7e39ab3a61251c26","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/group-pictures.styl","hash":"879f9cec9c88d65b2e31af4346b2bc0f6941f05d","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/label.styl","hash":"78d309e22206a4addda3c393282518dae02250ed","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/note.styl","hash":"a1eed8fe7f97885a9234502a197abf2e90ba22b6","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/pdf.styl","hash":"2dc2a5b7becb11de1d4bdab6b5195588ae878cfc","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/tabs.styl","hash":"2f39b2f07c2bbca34e2f1e4805ea374566b79dbf","modified":1573747337086},{"_id":"themes/next/source/css/_common/scaffolding/tags/tags.styl","hash":"9e4c0653cfd3cc6908fa0d97581bcf80861fb1e7","modified":1573747337086},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1573747337090},{"_id":"public/archives/index.html","hash":"e0002cce665f1aa3014c7058713bebb44a3e855a","modified":1573749886926},{"_id":"public/archives/2019/index.html","hash":"e02e4c4a667a44e4404ca44f23fd4d2e734909bf","modified":1573749886926},{"_id":"public/archives/2019/10/index.html","hash":"f8c701c0ac92c8f8306e79479985ab49c18ab09e","modified":1573749886926},{"_id":"public/archives/2019/11/index.html","hash":"1d0981bde311f971a28de26114aa7e34b94428e3","modified":1573749886926},{"_id":"public/tags/Git/index.html","hash":"3df0a4c1e603ff0b854bd04b0ad1f1698efac07c","modified":1573749886926},{"_id":"public/tags/GitHub/index.html","hash":"a8da494d8c64439d50642fed402714ec288c89f4","modified":1573749886926},{"_id":"public/tags/php/index.html","hash":"3135b4267718609f2eca4bbf4b6f62e9e204a652","modified":1573749886926},{"_id":"public/tags/Debian/index.html","hash":"117333f14b78e28624a5ef082a23d91226e43927","modified":1573749886926},{"_id":"public/tags/Linux/index.html","hash":"941022ed083d0a596b5397d832f99095e0cee78f","modified":1573749886926},{"_id":"public/tags/timedatectl/index.html","hash":"4e83d7e2c0ad69a24ec0292e0917bd030b9eca33","modified":1573749886926},{"_id":"public/tags/vagrant/index.html","hash":"13d3e2effc3b7cb224c8b28bd514b770ec952811","modified":1573749886926},{"_id":"public/tags/init/index.html","hash":"7a13186476dd4804ae852e5215a8634a0d752d22","modified":1573749886926},{"_id":"public/2019/11/15/linux-debian-time-adjustment/index.html","hash":"bfffdd09f7d19002c86de999aa1296eb36135913","modified":1573749886926},{"_id":"public/2019/11/03/laravel-build-develop-environment-debian/index.html","hash":"45cf8321afec3302a1b58ca35e954338a70201df","modified":1573749886926},{"_id":"public/2019/10/26/vagrant-up-mint19-desktop/index.html","hash":"42dc7e983859defc49eb2e17e85fcf18d664c15b","modified":1573749886927},{"_id":"public/2019/10/20/initrd-unpack-edit-compress/index.html","hash":"5336e7529658b518820e02c4174e90571800f9a1","modified":1573749886927},{"_id":"public/2019/10/20/github-addkey/index.html","hash":"3a554f67e3aefbc7452c009e43e6e29e5409c98f","modified":1573749886927},{"_id":"public/2019/10/12/git-howto-simple/index.html","hash":"e4757c182719c1e0d53c211b0a569044c5b11a42","modified":1573749886927},{"_id":"public/index.html","hash":"87c6bf25f57d04f56c5af56183dd9ba518c3aab4","modified":1573749886927},{"_id":"public/readme.md","hash":"1ab9f6c29725c1edbd8c1043e375f94c4bb88ecb","modified":1573749886930},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1573749886930},{"_id":"public/images/apple-touch-icon-next.png","hash":"910e4daf6c96b026ed56df788c675229d5b0178a","modified":1573749886930},{"_id":"public/images/avatar.gif","hash":"18c53e15eb0c84b139995f9334ed8522b40aeaf6","modified":1573749886930},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1573749886930},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1573749886930},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1573749886930},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1573749886930},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1573749886930},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1573749886930},{"_id":"public/images/favicon-16x16-next.png","hash":"18cad54ace3fe10da978ecd487d5c98be35c600f","modified":1573749886930},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1573749886930},{"_id":"public/images/favicon-32x32-next.png","hash":"ee4ce828a1ebd14c0b7546fd7c9ea091af1c199b","modified":1573749886931},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1573749886931},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1573749886931},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1573749886931},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1573749886931},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1573749886931},{"_id":"public/images/github-settings-keys2.png","hash":"c58ca309336676cbb3cff068a25d240a37415c15","modified":1573749887285},{"_id":"public/images/github-settings-keys.png","hash":"2d180f8334de1db26ff75d7efe56098404577cae","modified":1573749887285},{"_id":"public/images/laravel-dev-create.png","hash":"72e11e0a9fdcc00c4081688d39c7ccf05d496970","modified":1573749887286},{"_id":"public/images/github-settings2.png","hash":"a42afcecd8d35c6b8072242ab23730f389f9c982","modified":1573749887286},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1573749887286},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1573749887286},{"_id":"public/js/algolia-search.js","hash":"813afcc30feee11d59f297f2d5a96f98fbbd4743","modified":1573749887290},{"_id":"public/js/bookmark.js","hash":"60cab6771a57c268da331920edd6d7fcd2713d42","modified":1573749887290},{"_id":"public/js/next-boot.js","hash":"a6a82905c6abb8e0ec418ef6b0509b946b955807","modified":1573749887290},{"_id":"public/js/motion.js","hash":"71e5caff1d87b1b7256f61e6b318bedf495f9e75","modified":1573749887290},{"_id":"public/js/schemes/muse.js","hash":"a0f4bbb965867ff4b0a09df6c50e927d707a753c","modified":1573749887290},{"_id":"public/js/schemes/pisces.js","hash":"1e47ffdda23f7f645a2a883a90e2e9d9ddbf9a46","modified":1573749887290},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1573749887290},{"_id":"public/css/main.css","hash":"e95d2d1cb3597f6e471042d0261ecfdb1d5137ea","modified":1573749887290},{"_id":"public/images/github-settings.png","hash":"46e86aa2d811133455ad8d5090b08c8e2b6540cc","modified":1573749887290},{"_id":"public/js/local-search.js","hash":"0579159bf994e3726b3ba063e5905f79465fdfb1","modified":1573749887295},{"_id":"public/js/utils.js","hash":"33a76cda8ecad2bea9db13e1f77c6e22fd6452fe","modified":1573749887295},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1573749887295},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1573749887295},{"_id":"public/lib/anime.min.js","hash":"47cb482a8a488620a793d50ba8f6752324b46af3","modified":1573749887298},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1573749887300},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1573749887303},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1573749887303}],"Category":[],"Data":[],"Page":[],"Post":[{"title":"Microsoft製?Androidタブレットを作成する","_content":"","source":"_drafts/Microsoft製-Androidタブレットを作成する.md","raw":"---\ntitle: Microsoft製?Androidタブレットを作成する\ntags:\n---\n","slug":"Microsoft製-Androidタブレットを作成する","published":0,"date":"1970-01-01T00:00:00.000Z","updated":"2019-11-14T16:02:17.054Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2yxz53l0000shzms0qg22d6","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"VDIでAndroidを起動する","_content":"","source":"_drafts/VDIでAndroidを起動する.md","raw":"---\ntitle: VDIでAndroidを起動する\ntags:\n---\n","slug":"VDIでAndroidを起動する","published":0,"date":"1970-01-01T00:00:00.000Z","updated":"2019-11-14T16:02:17.058Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2yxz53p0001shzmsfddzry3","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"【2019年秋】RyzenとCore iシリーズ比較","_content":"","source":"_drafts/【2019年秋】RyzenとCore-iシリーズ比較.md","raw":"---\ntitle: 【2019年秋】RyzenとCore iシリーズ比較\ntags:\n---\n","slug":"【2019年秋】RyzenとCore-iシリーズ比較","published":0,"date":"1970-01-01T00:00:00.000Z","updated":"2019-11-14T16:02:17.058Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ck2yxz53r0002shzm8smtdsis","content":"","site":{"data":{}},"excerpt":"","more":""},{"title":"Gitの使い方","date":"2019-10-12T11:38:05.000Z","_content":"\n# 必要な基礎知識\n\n- リポジトリ\n  - リモートリポジトリ\n    - 皆で操作するために作られる\n  - ローカルリポジトリ\n    - 自分が操作するために作られる\n- ブランチ\n  - リポジトリに含まれる機能\n  - デフォルトでmasterブランチが作られる\n  - ブランチ同士を突き合わせて差分を見てからマージを行う\n- ワーキングツリー\n  - 現在のファイルの状態\n- インデックス\n  - 現在のファイルの管理状態\n  - git add \"ファイル名\" と操作を行うと、指定したファイルがステージング状態(コミットに含まれる状態)となる\n  - インデックスをリセットしたい場合には、git resetする\n  - 状態\n    - ステージング\n      - 次のコミットに含まれる状態\n    - 非ステージング\n      - 次のコミットに含まれない状態\n    - 非トラッキング\n      - ブランチ内で全く管理していない状態\n- コミット\n  - ファイルの状態を確定する操作\n  - ログを見たり、以前の状態に戻す際に必要となる\n- プッシュ\n  - ローカルで変更されたブランチをリモートリポジトリに反映させる際に行う操作\n\n# リポジトリ作成からプッシュまでの手順\n\n基本的にはコマンドを使うことは無いかと思いますが、ここではコマンド操作による説明を行います。\n\n## 1.リモートリポジトリを作成する\n\n```cmd\n> mkdir \"プロジェクト名\"\n> cd \"プロジェクト名\"\n> git init --bare\nInitialized empty Git repository in /path/プロジェクト名/\n```\n\n## 2.リモートリポジトリを複製し、ローカルリポジトリを作成する\n\n```cmd\n> mkdir work\n> cd work\n> git clone \"1で作成したフォルダのパス\"\n```\n\n## 3.ブランチを分ける\n\n```cmd\n> git checkout -b \"ブランチ名\"\n```\n\n> **ポイント**\n> checkout -bでは、ブランチの作成と切替を同時に行います。\n\n## 4.現在のブランチを確認する\n\n```cmd\n> git branch -a -vvv\n```\n\n> **ポイント1** \n> *がついているブランチが現在選択中のブランチとなります。</p>\n\n> **ポイント2** \n> remotesで始まる名前の物は、リモートリポジトリにあるブランチとなります。\n\n> **注意** \n> masterブランチに１つもコミットが無い状態での\n> ブランチ作成、切替を行った状態では、何も表示されない様です。\n\n## 5.変更\n\nファイルを修正、追加するなどして変更を加えます\n\n## 6.git add前に状態を確認\n\nUntracked files(非トラッキング)となっている事がわかります。\n\n```cmd\n> git status\n```\n\n## 7.git addする\n\n```cmd\n> git add \"\"今回新規作成されたファイル\"\n```\n\n## 8.ステージング後に状態を確認\n\nChanges to be commited(ステージング)に含まれている事がわかります。\n\n```cmd\n> git status\n```\n\n## 9.変更を確定する\n\n```cmd\n> git commit -m \"ログに残すメッセージ\"\n```\n\n## 10.ログを確認する\n\n```cmd\n> git log\n```\n\n## 11.プッシュする\n\n```cmd\n> git push origin HEAD\n```\n\n> **ポイント**\n> originとは、clone時に自動で作成されるリモートリポジトリのURLの名前となります。\n> HEADとは、現在のブランチの最新コミットの状態を指します。\n> この二つを組み合わせる事で、ブランチ名を指定する事なく、プッシュする事が可能です。\n","source":"_posts/git-howto-simple.md","raw":"---\ntitle: Gitの使い方\ndate: 2019-10-12 20:38:05\ntags: [Git]\n---\n\n# 必要な基礎知識\n\n- リポジトリ\n  - リモートリポジトリ\n    - 皆で操作するために作られる\n  - ローカルリポジトリ\n    - 自分が操作するために作られる\n- ブランチ\n  - リポジトリに含まれる機能\n  - デフォルトでmasterブランチが作られる\n  - ブランチ同士を突き合わせて差分を見てからマージを行う\n- ワーキングツリー\n  - 現在のファイルの状態\n- インデックス\n  - 現在のファイルの管理状態\n  - git add \"ファイル名\" と操作を行うと、指定したファイルがステージング状態(コミットに含まれる状態)となる\n  - インデックスをリセットしたい場合には、git resetする\n  - 状態\n    - ステージング\n      - 次のコミットに含まれる状態\n    - 非ステージング\n      - 次のコミットに含まれない状態\n    - 非トラッキング\n      - ブランチ内で全く管理していない状態\n- コミット\n  - ファイルの状態を確定する操作\n  - ログを見たり、以前の状態に戻す際に必要となる\n- プッシュ\n  - ローカルで変更されたブランチをリモートリポジトリに反映させる際に行う操作\n\n# リポジトリ作成からプッシュまでの手順\n\n基本的にはコマンドを使うことは無いかと思いますが、ここではコマンド操作による説明を行います。\n\n## 1.リモートリポジトリを作成する\n\n```cmd\n> mkdir \"プロジェクト名\"\n> cd \"プロジェクト名\"\n> git init --bare\nInitialized empty Git repository in /path/プロジェクト名/\n```\n\n## 2.リモートリポジトリを複製し、ローカルリポジトリを作成する\n\n```cmd\n> mkdir work\n> cd work\n> git clone \"1で作成したフォルダのパス\"\n```\n\n## 3.ブランチを分ける\n\n```cmd\n> git checkout -b \"ブランチ名\"\n```\n\n> **ポイント**\n> checkout -bでは、ブランチの作成と切替を同時に行います。\n\n## 4.現在のブランチを確認する\n\n```cmd\n> git branch -a -vvv\n```\n\n> **ポイント1** \n> *がついているブランチが現在選択中のブランチとなります。</p>\n\n> **ポイント2** \n> remotesで始まる名前の物は、リモートリポジトリにあるブランチとなります。\n\n> **注意** \n> masterブランチに１つもコミットが無い状態での\n> ブランチ作成、切替を行った状態では、何も表示されない様です。\n\n## 5.変更\n\nファイルを修正、追加するなどして変更を加えます\n\n## 6.git add前に状態を確認\n\nUntracked files(非トラッキング)となっている事がわかります。\n\n```cmd\n> git status\n```\n\n## 7.git addする\n\n```cmd\n> git add \"\"今回新規作成されたファイル\"\n```\n\n## 8.ステージング後に状態を確認\n\nChanges to be commited(ステージング)に含まれている事がわかります。\n\n```cmd\n> git status\n```\n\n## 9.変更を確定する\n\n```cmd\n> git commit -m \"ログに残すメッセージ\"\n```\n\n## 10.ログを確認する\n\n```cmd\n> git log\n```\n\n## 11.プッシュする\n\n```cmd\n> git push origin HEAD\n```\n\n> **ポイント**\n> originとは、clone時に自動で作成されるリモートリポジトリのURLの名前となります。\n> HEADとは、現在のブランチの最新コミットの状態を指します。\n> この二つを組み合わせる事で、ブランチ名を指定する事なく、プッシュする事が可能です。\n","slug":"git-howto-simple","published":1,"updated":"2019-11-14T16:02:17.058Z","_id":"ck2yxz53t0003shzmmgnvpl0h","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"必要な基礎知識\"><a href=\"#必要な基礎知識\" class=\"headerlink\" title=\"必要な基礎知識\"></a>必要な基礎知識</h1><ul>\n<li>リポジトリ<ul>\n<li>リモートリポジトリ<ul>\n<li>皆で操作するために作られる</li>\n</ul>\n</li>\n<li>ローカルリポジトリ<ul>\n<li>自分が操作するために作られる</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ブランチ<ul>\n<li>リポジトリに含まれる機能</li>\n<li>デフォルトでmasterブランチが作られる</li>\n<li>ブランチ同士を突き合わせて差分を見てからマージを行う</li>\n</ul>\n</li>\n<li>ワーキングツリー<ul>\n<li>現在のファイルの状態</li>\n</ul>\n</li>\n<li>インデックス<ul>\n<li>現在のファイルの管理状態</li>\n<li>git add “ファイル名” と操作を行うと、指定したファイルがステージング状態(コミットに含まれる状態)となる</li>\n<li>インデックスをリセットしたい場合には、git resetする</li>\n<li>状態<ul>\n<li>ステージング<ul>\n<li>次のコミットに含まれる状態</li>\n</ul>\n</li>\n<li>非ステージング<ul>\n<li>次のコミットに含まれない状態</li>\n</ul>\n</li>\n<li>非トラッキング<ul>\n<li>ブランチ内で全く管理していない状態</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>コミット<ul>\n<li>ファイルの状態を確定する操作</li>\n<li>ログを見たり、以前の状態に戻す際に必要となる</li>\n</ul>\n</li>\n<li>プッシュ<ul>\n<li>ローカルで変更されたブランチをリモートリポジトリに反映させる際に行う操作</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"リポジトリ作成からプッシュまでの手順\"><a href=\"#リポジトリ作成からプッシュまでの手順\" class=\"headerlink\" title=\"リポジトリ作成からプッシュまでの手順\"></a>リポジトリ作成からプッシュまでの手順</h1><p>基本的にはコマンドを使うことは無いかと思いますが、ここではコマンド操作による説明を行います。</p>\n<h2 id=\"1-リモートリポジトリを作成する\"><a href=\"#1-リモートリポジトリを作成する\" class=\"headerlink\" title=\"1.リモートリポジトリを作成する\"></a>1.リモートリポジトリを作成する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"built_in\">mkdir</span> \"プロジェクト名\"</span><br><span class=\"line\">&gt; <span class=\"built_in\">cd</span> \"プロジェクト名\"</span><br><span class=\"line\">&gt; git init --bare</span><br><span class=\"line\">Initialized empty Git repository <span class=\"keyword\">in</span> /<span class=\"built_in\">path</span>/プロジェクト名/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-リモートリポジトリを複製し、ローカルリポジトリを作成する\"><a href=\"#2-リモートリポジトリを複製し、ローカルリポジトリを作成する\" class=\"headerlink\" title=\"2.リモートリポジトリを複製し、ローカルリポジトリを作成する\"></a>2.リモートリポジトリを複製し、ローカルリポジトリを作成する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"built_in\">mkdir</span> work</span><br><span class=\"line\">&gt; <span class=\"built_in\">cd</span> work</span><br><span class=\"line\">&gt; git clone \"<span class=\"number\">1</span>で作成したフォルダのパス\"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-ブランチを分ける\"><a href=\"#3-ブランチを分ける\" class=\"headerlink\" title=\"3.ブランチを分ける\"></a>3.ブランチを分ける</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git checkout -b \"ブランチ名\"</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>ポイント</strong><br>checkout -bでは、ブランチの作成と切替を同時に行います。</p>\n</blockquote>\n<h2 id=\"4-現在のブランチを確認する\"><a href=\"#4-現在のブランチを確認する\" class=\"headerlink\" title=\"4.現在のブランチを確認する\"></a>4.現在のブランチを確認する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git branch -a -vvv</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>ポイント1</strong><br>*がついているブランチが現在選択中のブランチとなります。</p><p></p>\n</blockquote>\n<blockquote>\n<p><strong>ポイント2</strong><br>remotesで始まる名前の物は、リモートリポジトリにあるブランチとなります。</p>\n</blockquote>\n<blockquote>\n<p><strong>注意</strong><br>masterブランチに１つもコミットが無い状態での<br>ブランチ作成、切替を行った状態では、何も表示されない様です。</p>\n</blockquote>\n<h2 id=\"5-変更\"><a href=\"#5-変更\" class=\"headerlink\" title=\"5.変更\"></a>5.変更</h2><p>ファイルを修正、追加するなどして変更を加えます</p>\n<h2 id=\"6-git-add前に状態を確認\"><a href=\"#6-git-add前に状態を確認\" class=\"headerlink\" title=\"6.git add前に状態を確認\"></a>6.git add前に状態を確認</h2><p>Untracked files(非トラッキング)となっている事がわかります。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git status</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-git-addする\"><a href=\"#7-git-addする\" class=\"headerlink\" title=\"7.git addする\"></a>7.git addする</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git add \"\"今回新規作成されたファイル\"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-ステージング後に状態を確認\"><a href=\"#8-ステージング後に状態を確認\" class=\"headerlink\" title=\"8.ステージング後に状態を確認\"></a>8.ステージング後に状態を確認</h2><p>Changes to be commited(ステージング)に含まれている事がわかります。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git status</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-変更を確定する\"><a href=\"#9-変更を確定する\" class=\"headerlink\" title=\"9.変更を確定する\"></a>9.変更を確定する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git commit -m \"ログに残すメッセージ\"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-ログを確認する\"><a href=\"#10-ログを確認する\" class=\"headerlink\" title=\"10.ログを確認する\"></a>10.ログを確認する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git log</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-プッシュする\"><a href=\"#11-プッシュする\" class=\"headerlink\" title=\"11.プッシュする\"></a>11.プッシュする</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git push origin HEAD</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>ポイント</strong><br>originとは、clone時に自動で作成されるリモートリポジトリのURLの名前となります。<br>HEADとは、現在のブランチの最新コミットの状態を指します。<br>この二つを組み合わせる事で、ブランチ名を指定する事なく、プッシュする事が可能です。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"必要な基礎知識\"><a href=\"#必要な基礎知識\" class=\"headerlink\" title=\"必要な基礎知識\"></a>必要な基礎知識</h1><ul>\n<li>リポジトリ<ul>\n<li>リモートリポジトリ<ul>\n<li>皆で操作するために作られる</li>\n</ul>\n</li>\n<li>ローカルリポジトリ<ul>\n<li>自分が操作するために作られる</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>ブランチ<ul>\n<li>リポジトリに含まれる機能</li>\n<li>デフォルトでmasterブランチが作られる</li>\n<li>ブランチ同士を突き合わせて差分を見てからマージを行う</li>\n</ul>\n</li>\n<li>ワーキングツリー<ul>\n<li>現在のファイルの状態</li>\n</ul>\n</li>\n<li>インデックス<ul>\n<li>現在のファイルの管理状態</li>\n<li>git add “ファイル名” と操作を行うと、指定したファイルがステージング状態(コミットに含まれる状態)となる</li>\n<li>インデックスをリセットしたい場合には、git resetする</li>\n<li>状態<ul>\n<li>ステージング<ul>\n<li>次のコミットに含まれる状態</li>\n</ul>\n</li>\n<li>非ステージング<ul>\n<li>次のコミットに含まれない状態</li>\n</ul>\n</li>\n<li>非トラッキング<ul>\n<li>ブランチ内で全く管理していない状態</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>コミット<ul>\n<li>ファイルの状態を確定する操作</li>\n<li>ログを見たり、以前の状態に戻す際に必要となる</li>\n</ul>\n</li>\n<li>プッシュ<ul>\n<li>ローカルで変更されたブランチをリモートリポジトリに反映させる際に行う操作</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"リポジトリ作成からプッシュまでの手順\"><a href=\"#リポジトリ作成からプッシュまでの手順\" class=\"headerlink\" title=\"リポジトリ作成からプッシュまでの手順\"></a>リポジトリ作成からプッシュまでの手順</h1><p>基本的にはコマンドを使うことは無いかと思いますが、ここではコマンド操作による説明を行います。</p>\n<h2 id=\"1-リモートリポジトリを作成する\"><a href=\"#1-リモートリポジトリを作成する\" class=\"headerlink\" title=\"1.リモートリポジトリを作成する\"></a>1.リモートリポジトリを作成する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"built_in\">mkdir</span> \"プロジェクト名\"</span><br><span class=\"line\">&gt; <span class=\"built_in\">cd</span> \"プロジェクト名\"</span><br><span class=\"line\">&gt; git init --bare</span><br><span class=\"line\">Initialized empty Git repository <span class=\"keyword\">in</span> /<span class=\"built_in\">path</span>/プロジェクト名/</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"2-リモートリポジトリを複製し、ローカルリポジトリを作成する\"><a href=\"#2-リモートリポジトリを複製し、ローカルリポジトリを作成する\" class=\"headerlink\" title=\"2.リモートリポジトリを複製し、ローカルリポジトリを作成する\"></a>2.リモートリポジトリを複製し、ローカルリポジトリを作成する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; <span class=\"built_in\">mkdir</span> work</span><br><span class=\"line\">&gt; <span class=\"built_in\">cd</span> work</span><br><span class=\"line\">&gt; git clone \"<span class=\"number\">1</span>で作成したフォルダのパス\"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-ブランチを分ける\"><a href=\"#3-ブランチを分ける\" class=\"headerlink\" title=\"3.ブランチを分ける\"></a>3.ブランチを分ける</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git checkout -b \"ブランチ名\"</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>ポイント</strong><br>checkout -bでは、ブランチの作成と切替を同時に行います。</p>\n</blockquote>\n<h2 id=\"4-現在のブランチを確認する\"><a href=\"#4-現在のブランチを確認する\" class=\"headerlink\" title=\"4.現在のブランチを確認する\"></a>4.現在のブランチを確認する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git branch -a -vvv</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>ポイント1</strong><br>*がついているブランチが現在選択中のブランチとなります。</p><p></p>\n</blockquote>\n<blockquote>\n<p><strong>ポイント2</strong><br>remotesで始まる名前の物は、リモートリポジトリにあるブランチとなります。</p>\n</blockquote>\n<blockquote>\n<p><strong>注意</strong><br>masterブランチに１つもコミットが無い状態での<br>ブランチ作成、切替を行った状態では、何も表示されない様です。</p>\n</blockquote>\n<h2 id=\"5-変更\"><a href=\"#5-変更\" class=\"headerlink\" title=\"5.変更\"></a>5.変更</h2><p>ファイルを修正、追加するなどして変更を加えます</p>\n<h2 id=\"6-git-add前に状態を確認\"><a href=\"#6-git-add前に状態を確認\" class=\"headerlink\" title=\"6.git add前に状態を確認\"></a>6.git add前に状態を確認</h2><p>Untracked files(非トラッキング)となっている事がわかります。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git status</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"7-git-addする\"><a href=\"#7-git-addする\" class=\"headerlink\" title=\"7.git addする\"></a>7.git addする</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git add \"\"今回新規作成されたファイル\"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"8-ステージング後に状態を確認\"><a href=\"#8-ステージング後に状態を確認\" class=\"headerlink\" title=\"8.ステージング後に状態を確認\"></a>8.ステージング後に状態を確認</h2><p>Changes to be commited(ステージング)に含まれている事がわかります。</p>\n<figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git status</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"9-変更を確定する\"><a href=\"#9-変更を確定する\" class=\"headerlink\" title=\"9.変更を確定する\"></a>9.変更を確定する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git commit -m \"ログに残すメッセージ\"</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"10-ログを確認する\"><a href=\"#10-ログを確認する\" class=\"headerlink\" title=\"10.ログを確認する\"></a>10.ログを確認する</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git log</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"11-プッシュする\"><a href=\"#11-プッシュする\" class=\"headerlink\" title=\"11.プッシュする\"></a>11.プッシュする</h2><figure class=\"highlight cmd\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; git push origin HEAD</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>ポイント</strong><br>originとは、clone時に自動で作成されるリモートリポジトリのURLの名前となります。<br>HEADとは、現在のブランチの最新コミットの状態を指します。<br>この二つを組み合わせる事で、ブランチ名を指定する事なく、プッシュする事が可能です。</p>\n</blockquote>\n"},{"title":"GitHubに公開鍵を追加する","date":"2019-10-20T03:42:45.000Z","_content":"\n# 前提環境\n\n- Ubuntu\n\n# GitHubに公開鍵を追加する理由\n\n- sshを使ってリモートリポジトリの操作を出来る様になる\n- GitHub上にあるリポジトリをsshで操作する様に作られた手順、ツールが沢山ある\n\n> **注意**\n> sshを使わなくてもhttpで操作する事が可能\n> ただし、その場合はGitHubアカウントのパスワード入力が多々必要になる\n\n# 手順\n\n## 秘密鍵・公開鍵を作成する\n\n```bash\n$ ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa): sakkuntyo-mint #鍵の名前です、今回はLinuxMint用に作成したためこの名前\nEnter passphrase (empty for no passphrase): #パスワード、無くても良い\nEnter same passphrase again: #パスワードの再確認\nYour identification has been saved in sakkuntyo-mint.\nYour public key has been saved in sakkuntyo-mint.pub.\nThe key fingerprint is:\nSHA256:7XG5j/GRtAxIs3/dkUxVIZDrcyG+6g7LVxqvNVK1bEg root@DESKTOP-2QSQU2N\nThe key's randomart image is:\n+---[RSA 2048]----+\n|           .o. .=|\n|           .  . .|\n|          oE.. . |\n|         o.*+o+ .|\n|        S Bo=+o+ |\n|         o.O.* +o|\n|       . .*oB * o|\n|      . oooo.* . |\n|       o+=o . o  |\n+----[SHA256]-----+\n```\n\n## 鍵ファイルが出来た事を確認する\n\n```bash\n$ ls\nsakkuntyo-mint sakkuntyo-mint.pub\n```\n\n.pubが付いているのが公開鍵\nついていないのが秘密鍵\n\n## GitHubに配置する\n\n### github.comのsettingsを開く\n\n![github-settings](/images/github-settings.png)\n![github-settings2](/images/github-settings2.png)\n\n### 「SHS and GPG keys」を開き、公開鍵の名前と公開鍵の内容を登録\n\nTitleは何でも大丈夫\n\n![github-settings](/images/github-settings-keys.png)\n![github-settings](/images/github-settings-keys2.png)\n\nこれで公開鍵が登録されました\n\n## sshクライアントにgitの設定を追加\n\n~/.ssh/configを編集し、以下の4行を追加\n\n```\nHost git\n  hostname github.com\n  user git\n  identityfile ~/.ssh/sakkuntyo-mint #秘密鍵のパス\n```\n\n秘密鍵をconfigで指定した場所に置きなおす\n\n```bash\n$ mv sakkuntyo-mint ~/.ssh/\n```\n秘密鍵の権限を自分だけが読める様に変更\n\n```bash\n$ chmod 0600 ~/.ssh/sakkuntyo-mint\n```\n\n## プライベートリポジトリをcloneしてみる\n\nプライベートリポジトリをhttpでcloneしようとするとパスワードが求められますが\nsshを使ってcloneした場合にはパスワードは求められなくなります\n\n```bash\n$ git clone git:sakkuntyo/private-repo\n```\n","source":"_posts/github-addkey.md","raw":"---\ntitle: GitHubに公開鍵を追加する\ndate: 2019-10-20 12:42:45\ntags: [GitHub]\n---\n\n# 前提環境\n\n- Ubuntu\n\n# GitHubに公開鍵を追加する理由\n\n- sshを使ってリモートリポジトリの操作を出来る様になる\n- GitHub上にあるリポジトリをsshで操作する様に作られた手順、ツールが沢山ある\n\n> **注意**\n> sshを使わなくてもhttpで操作する事が可能\n> ただし、その場合はGitHubアカウントのパスワード入力が多々必要になる\n\n# 手順\n\n## 秘密鍵・公開鍵を作成する\n\n```bash\n$ ssh-keygen -t rsa\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa): sakkuntyo-mint #鍵の名前です、今回はLinuxMint用に作成したためこの名前\nEnter passphrase (empty for no passphrase): #パスワード、無くても良い\nEnter same passphrase again: #パスワードの再確認\nYour identification has been saved in sakkuntyo-mint.\nYour public key has been saved in sakkuntyo-mint.pub.\nThe key fingerprint is:\nSHA256:7XG5j/GRtAxIs3/dkUxVIZDrcyG+6g7LVxqvNVK1bEg root@DESKTOP-2QSQU2N\nThe key's randomart image is:\n+---[RSA 2048]----+\n|           .o. .=|\n|           .  . .|\n|          oE.. . |\n|         o.*+o+ .|\n|        S Bo=+o+ |\n|         o.O.* +o|\n|       . .*oB * o|\n|      . oooo.* . |\n|       o+=o . o  |\n+----[SHA256]-----+\n```\n\n## 鍵ファイルが出来た事を確認する\n\n```bash\n$ ls\nsakkuntyo-mint sakkuntyo-mint.pub\n```\n\n.pubが付いているのが公開鍵\nついていないのが秘密鍵\n\n## GitHubに配置する\n\n### github.comのsettingsを開く\n\n![github-settings](/images/github-settings.png)\n![github-settings2](/images/github-settings2.png)\n\n### 「SHS and GPG keys」を開き、公開鍵の名前と公開鍵の内容を登録\n\nTitleは何でも大丈夫\n\n![github-settings](/images/github-settings-keys.png)\n![github-settings](/images/github-settings-keys2.png)\n\nこれで公開鍵が登録されました\n\n## sshクライアントにgitの設定を追加\n\n~/.ssh/configを編集し、以下の4行を追加\n\n```\nHost git\n  hostname github.com\n  user git\n  identityfile ~/.ssh/sakkuntyo-mint #秘密鍵のパス\n```\n\n秘密鍵をconfigで指定した場所に置きなおす\n\n```bash\n$ mv sakkuntyo-mint ~/.ssh/\n```\n秘密鍵の権限を自分だけが読める様に変更\n\n```bash\n$ chmod 0600 ~/.ssh/sakkuntyo-mint\n```\n\n## プライベートリポジトリをcloneしてみる\n\nプライベートリポジトリをhttpでcloneしようとするとパスワードが求められますが\nsshを使ってcloneした場合にはパスワードは求められなくなります\n\n```bash\n$ git clone git:sakkuntyo/private-repo\n```\n","slug":"github-addkey","published":1,"updated":"2019-11-14T16:02:17.058Z","_id":"ck2yxz53u0004shzmimqy4isz","comments":1,"layout":"post","photos":[],"link":"","content":"<h1 id=\"前提環境\"><a href=\"#前提環境\" class=\"headerlink\" title=\"前提環境\"></a>前提環境</h1><ul>\n<li>Ubuntu</li>\n</ul>\n<h1 id=\"GitHubに公開鍵を追加する理由\"><a href=\"#GitHubに公開鍵を追加する理由\" class=\"headerlink\" title=\"GitHubに公開鍵を追加する理由\"></a>GitHubに公開鍵を追加する理由</h1><ul>\n<li>sshを使ってリモートリポジトリの操作を出来る様になる</li>\n<li>GitHub上にあるリポジトリをsshで操作する様に作られた手順、ツールが沢山ある</li>\n</ul>\n<blockquote>\n<p><strong>注意</strong><br>sshを使わなくてもhttpで操作する事が可能<br>ただし、その場合はGitHubアカウントのパスワード入力が多々必要になる</p>\n</blockquote>\n<h1 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h1><h2 id=\"秘密鍵・公開鍵を作成する\"><a href=\"#秘密鍵・公開鍵を作成する\" class=\"headerlink\" title=\"秘密鍵・公開鍵を作成する\"></a>秘密鍵・公開鍵を作成する</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ssh-keygen -t rsa</span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file <span class=\"keyword\">in</span> <span class=\"built_in\">which</span> to save the key (/root/.ssh/id_rsa): sakkuntyo-mint <span class=\"comment\">#鍵の名前です、今回はLinuxMint用に作成したためこの名前</span></span><br><span class=\"line\">Enter passphrase (empty <span class=\"keyword\">for</span> no passphrase): <span class=\"comment\">#パスワード、無くても良い</span></span><br><span class=\"line\">Enter same passphrase again: <span class=\"comment\">#パスワードの再確認</span></span><br><span class=\"line\">Your identification has been saved <span class=\"keyword\">in</span> sakkuntyo-mint.</span><br><span class=\"line\">Your public key has been saved <span class=\"keyword\">in</span> sakkuntyo-mint.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">SHA256:7XG5j/GRtAxIs3/dkUxVIZDrcyG+6g7LVxqvNVK1bEg root@DESKTOP-2QSQU2N</span><br><span class=\"line\">The key<span class=\"string\">'s randomart image is:</span></span><br><span class=\"line\"><span class=\"string\">+---[RSA 2048]----+</span></span><br><span class=\"line\"><span class=\"string\">|           .o. .=|</span></span><br><span class=\"line\"><span class=\"string\">|           .  . .|</span></span><br><span class=\"line\"><span class=\"string\">|          oE.. . |</span></span><br><span class=\"line\"><span class=\"string\">|         o.*+o+ .|</span></span><br><span class=\"line\"><span class=\"string\">|        S Bo=+o+ |</span></span><br><span class=\"line\"><span class=\"string\">|         o.O.* +o|</span></span><br><span class=\"line\"><span class=\"string\">|       . .*oB * o|</span></span><br><span class=\"line\"><span class=\"string\">|      . oooo.* . |</span></span><br><span class=\"line\"><span class=\"string\">|       o+=o . o  |</span></span><br><span class=\"line\"><span class=\"string\">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"鍵ファイルが出来た事を確認する\"><a href=\"#鍵ファイルが出来た事を確認する\" class=\"headerlink\" title=\"鍵ファイルが出来た事を確認する\"></a>鍵ファイルが出来た事を確認する</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ls</span><br><span class=\"line\">sakkuntyo-mint sakkuntyo-mint.pub</span><br></pre></td></tr></table></figure>\n\n<p>.pubが付いているのが公開鍵<br>ついていないのが秘密鍵</p>\n<h2 id=\"GitHubに配置する\"><a href=\"#GitHubに配置する\" class=\"headerlink\" title=\"GitHubに配置する\"></a>GitHubに配置する</h2><h3 id=\"github-comのsettingsを開く\"><a href=\"#github-comのsettingsを開く\" class=\"headerlink\" title=\"github.comのsettingsを開く\"></a>github.comのsettingsを開く</h3><p><img src=\"/images/github-settings.png\" alt=\"github-settings\"><br><img src=\"/images/github-settings2.png\" alt=\"github-settings2\"></p>\n<h3 id=\"「SHS-and-GPG-keys」を開き、公開鍵の名前と公開鍵の内容を登録\"><a href=\"#「SHS-and-GPG-keys」を開き、公開鍵の名前と公開鍵の内容を登録\" class=\"headerlink\" title=\"「SHS and GPG keys」を開き、公開鍵の名前と公開鍵の内容を登録\"></a>「SHS and GPG keys」を開き、公開鍵の名前と公開鍵の内容を登録</h3><p>Titleは何でも大丈夫</p>\n<p><img src=\"/images/github-settings-keys.png\" alt=\"github-settings\"><br><img src=\"/images/github-settings-keys2.png\" alt=\"github-settings\"></p>\n<p>これで公開鍵が登録されました</p>\n<h2 id=\"sshクライアントにgitの設定を追加\"><a href=\"#sshクライアントにgitの設定を追加\" class=\"headerlink\" title=\"sshクライアントにgitの設定を追加\"></a>sshクライアントにgitの設定を追加</h2><p>~/.ssh/configを編集し、以下の4行を追加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host git</span><br><span class=\"line\">  hostname github.com</span><br><span class=\"line\">  user git</span><br><span class=\"line\">  identityfile ~/.ssh/sakkuntyo-mint #秘密鍵のパス</span><br></pre></td></tr></table></figure>\n\n<p>秘密鍵をconfigで指定した場所に置きなおす</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mv sakkuntyo-mint ~/.ssh/</span><br></pre></td></tr></table></figure>\n\n<p>秘密鍵の権限を自分だけが読める様に変更</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ chmod 0600 ~/.ssh/sakkuntyo-mint</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"プライベートリポジトリをcloneしてみる\"><a href=\"#プライベートリポジトリをcloneしてみる\" class=\"headerlink\" title=\"プライベートリポジトリをcloneしてみる\"></a>プライベートリポジトリをcloneしてみる</h2><p>プライベートリポジトリをhttpでcloneしようとするとパスワードが求められますが<br>sshを使ってcloneした場合にはパスワードは求められなくなります</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">clone</span> git:sakkuntyo/private-repo</span><br></pre></td></tr></table></figure>\n\n","site":{"data":{}},"excerpt":"","more":"<h1 id=\"前提環境\"><a href=\"#前提環境\" class=\"headerlink\" title=\"前提環境\"></a>前提環境</h1><ul>\n<li>Ubuntu</li>\n</ul>\n<h1 id=\"GitHubに公開鍵を追加する理由\"><a href=\"#GitHubに公開鍵を追加する理由\" class=\"headerlink\" title=\"GitHubに公開鍵を追加する理由\"></a>GitHubに公開鍵を追加する理由</h1><ul>\n<li>sshを使ってリモートリポジトリの操作を出来る様になる</li>\n<li>GitHub上にあるリポジトリをsshで操作する様に作られた手順、ツールが沢山ある</li>\n</ul>\n<blockquote>\n<p><strong>注意</strong><br>sshを使わなくてもhttpで操作する事が可能<br>ただし、その場合はGitHubアカウントのパスワード入力が多々必要になる</p>\n</blockquote>\n<h1 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h1><h2 id=\"秘密鍵・公開鍵を作成する\"><a href=\"#秘密鍵・公開鍵を作成する\" class=\"headerlink\" title=\"秘密鍵・公開鍵を作成する\"></a>秘密鍵・公開鍵を作成する</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ssh-keygen -t rsa</span><br><span class=\"line\">Generating public/private rsa key pair.</span><br><span class=\"line\">Enter file <span class=\"keyword\">in</span> <span class=\"built_in\">which</span> to save the key (/root/.ssh/id_rsa): sakkuntyo-mint <span class=\"comment\">#鍵の名前です、今回はLinuxMint用に作成したためこの名前</span></span><br><span class=\"line\">Enter passphrase (empty <span class=\"keyword\">for</span> no passphrase): <span class=\"comment\">#パスワード、無くても良い</span></span><br><span class=\"line\">Enter same passphrase again: <span class=\"comment\">#パスワードの再確認</span></span><br><span class=\"line\">Your identification has been saved <span class=\"keyword\">in</span> sakkuntyo-mint.</span><br><span class=\"line\">Your public key has been saved <span class=\"keyword\">in</span> sakkuntyo-mint.pub.</span><br><span class=\"line\">The key fingerprint is:</span><br><span class=\"line\">SHA256:7XG5j/GRtAxIs3/dkUxVIZDrcyG+6g7LVxqvNVK1bEg root@DESKTOP-2QSQU2N</span><br><span class=\"line\">The key<span class=\"string\">'s randomart image is:</span></span><br><span class=\"line\"><span class=\"string\">+---[RSA 2048]----+</span></span><br><span class=\"line\"><span class=\"string\">|           .o. .=|</span></span><br><span class=\"line\"><span class=\"string\">|           .  . .|</span></span><br><span class=\"line\"><span class=\"string\">|          oE.. . |</span></span><br><span class=\"line\"><span class=\"string\">|         o.*+o+ .|</span></span><br><span class=\"line\"><span class=\"string\">|        S Bo=+o+ |</span></span><br><span class=\"line\"><span class=\"string\">|         o.O.* +o|</span></span><br><span class=\"line\"><span class=\"string\">|       . .*oB * o|</span></span><br><span class=\"line\"><span class=\"string\">|      . oooo.* . |</span></span><br><span class=\"line\"><span class=\"string\">|       o+=o . o  |</span></span><br><span class=\"line\"><span class=\"string\">+----[SHA256]-----+</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"鍵ファイルが出来た事を確認する\"><a href=\"#鍵ファイルが出来た事を確認する\" class=\"headerlink\" title=\"鍵ファイルが出来た事を確認する\"></a>鍵ファイルが出来た事を確認する</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ls</span><br><span class=\"line\">sakkuntyo-mint sakkuntyo-mint.pub</span><br></pre></td></tr></table></figure>\n\n<p>.pubが付いているのが公開鍵<br>ついていないのが秘密鍵</p>\n<h2 id=\"GitHubに配置する\"><a href=\"#GitHubに配置する\" class=\"headerlink\" title=\"GitHubに配置する\"></a>GitHubに配置する</h2><h3 id=\"github-comのsettingsを開く\"><a href=\"#github-comのsettingsを開く\" class=\"headerlink\" title=\"github.comのsettingsを開く\"></a>github.comのsettingsを開く</h3><p><img src=\"/images/github-settings.png\" alt=\"github-settings\"><br><img src=\"/images/github-settings2.png\" alt=\"github-settings2\"></p>\n<h3 id=\"「SHS-and-GPG-keys」を開き、公開鍵の名前と公開鍵の内容を登録\"><a href=\"#「SHS-and-GPG-keys」を開き、公開鍵の名前と公開鍵の内容を登録\" class=\"headerlink\" title=\"「SHS and GPG keys」を開き、公開鍵の名前と公開鍵の内容を登録\"></a>「SHS and GPG keys」を開き、公開鍵の名前と公開鍵の内容を登録</h3><p>Titleは何でも大丈夫</p>\n<p><img src=\"/images/github-settings-keys.png\" alt=\"github-settings\"><br><img src=\"/images/github-settings-keys2.png\" alt=\"github-settings\"></p>\n<p>これで公開鍵が登録されました</p>\n<h2 id=\"sshクライアントにgitの設定を追加\"><a href=\"#sshクライアントにgitの設定を追加\" class=\"headerlink\" title=\"sshクライアントにgitの設定を追加\"></a>sshクライアントにgitの設定を追加</h2><p>~/.ssh/configを編集し、以下の4行を追加</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host git</span><br><span class=\"line\">  hostname github.com</span><br><span class=\"line\">  user git</span><br><span class=\"line\">  identityfile ~/.ssh/sakkuntyo-mint #秘密鍵のパス</span><br></pre></td></tr></table></figure>\n\n<p>秘密鍵をconfigで指定した場所に置きなおす</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mv sakkuntyo-mint ~/.ssh/</span><br></pre></td></tr></table></figure>\n\n<p>秘密鍵の権限を自分だけが読める様に変更</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ chmod 0600 ~/.ssh/sakkuntyo-mint</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"プライベートリポジトリをcloneしてみる\"><a href=\"#プライベートリポジトリをcloneしてみる\" class=\"headerlink\" title=\"プライベートリポジトリをcloneしてみる\"></a>プライベートリポジトリをcloneしてみる</h2><p>プライベートリポジトリをhttpでcloneしようとするとパスワードが求められますが<br>sshを使ってcloneした場合にはパスワードは求められなくなります</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ git <span class=\"built_in\">clone</span> git:sakkuntyo/private-repo</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Laravel開発環境構築【Debian系OS】","date":"2019-11-03T06:26:43.000Z","_content":"\n## 前提環境\n\n- Linux Mint19 Mate\n\n## 手順\n\n### phpをインストール\n\n```bash\n$ sudo apt update\n$ sudo apt install -y php7.2 php7.2-mbstring php7.2-xml php7.2-gd php7.2-zip\n$ sudo apt install -y sqlite3 php7.2-sqlite3 php7.2-mysql\n$ php --version\n$ php -m\n```\n\n### composerをインストール\n\n```bash\n$ curl -sS https://getcomposer.org/installer | php\n$ sudo mv composer.phar /usr/local/bin/composer\n$ sudo chmod +x /usr/local/bin/composer\n$ composer --version\n```\n\n### Laravelをインストール\n\n```bash\n$ composer global require laravel/installer\n```\n\n### パスを通す\n\n```bash\necho export PATH=\"~/.config/composer/vendor/bin:$PATH\" >> ~/.bash_profile\nsource ~/.bash_profile\n```\n### 実際に起動しブラウザで確認\n\n```bash\n$ laravel new test\n$ cd test\n$ php artisan --version\n$ php artisan serve --host 0.0.0.0\nLaravel development server started: http://0.0.0.0:8000\n\n```\n\nブラウザで接続してみると以下の様な画面が表示される\n\n![laravel](/images/laravel-dev-create.png)\n\n","source":"_posts/laravel-build-develop-environment-debian.md","raw":"---\ntitle: Laravel開発環境構築【Debian系OS】\ndate: 2019-11-03 15:26:43\ntags: [php]\n---\n\n## 前提環境\n\n- Linux Mint19 Mate\n\n## 手順\n\n### phpをインストール\n\n```bash\n$ sudo apt update\n$ sudo apt install -y php7.2 php7.2-mbstring php7.2-xml php7.2-gd php7.2-zip\n$ sudo apt install -y sqlite3 php7.2-sqlite3 php7.2-mysql\n$ php --version\n$ php -m\n```\n\n### composerをインストール\n\n```bash\n$ curl -sS https://getcomposer.org/installer | php\n$ sudo mv composer.phar /usr/local/bin/composer\n$ sudo chmod +x /usr/local/bin/composer\n$ composer --version\n```\n\n### Laravelをインストール\n\n```bash\n$ composer global require laravel/installer\n```\n\n### パスを通す\n\n```bash\necho export PATH=\"~/.config/composer/vendor/bin:$PATH\" >> ~/.bash_profile\nsource ~/.bash_profile\n```\n### 実際に起動しブラウザで確認\n\n```bash\n$ laravel new test\n$ cd test\n$ php artisan --version\n$ php artisan serve --host 0.0.0.0\nLaravel development server started: http://0.0.0.0:8000\n\n```\n\nブラウザで接続してみると以下の様な画面が表示される\n\n![laravel](/images/laravel-dev-create.png)\n\n","slug":"laravel-build-develop-environment-debian","published":1,"updated":"2019-11-14T16:02:17.058Z","_id":"ck2yxz53w0006shzmunb5lsbx","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"前提環境\"><a href=\"#前提環境\" class=\"headerlink\" title=\"前提環境\"></a>前提環境</h2><ul>\n<li>Linux Mint19 Mate</li>\n</ul>\n<h2 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h2><h3 id=\"phpをインストール\"><a href=\"#phpをインストール\" class=\"headerlink\" title=\"phpをインストール\"></a>phpをインストール</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt update</span><br><span class=\"line\">$ sudo apt install -y php7.2 php7.2-mbstring php7.2-xml php7.2-gd php7.2-zip</span><br><span class=\"line\">$ sudo apt install -y sqlite3 php7.2-sqlite3 php7.2-mysql</span><br><span class=\"line\">$ php --version</span><br><span class=\"line\">$ php -m</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"composerをインストール\"><a href=\"#composerをインストール\" class=\"headerlink\" title=\"composerをインストール\"></a>composerをインストール</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ curl -sS https://getcomposer.org/installer | php</span><br><span class=\"line\">$ sudo mv composer.phar /usr/<span class=\"built_in\">local</span>/bin/composer</span><br><span class=\"line\">$ sudo chmod +x /usr/<span class=\"built_in\">local</span>/bin/composer</span><br><span class=\"line\">$ composer --version</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Laravelをインストール\"><a href=\"#Laravelをインストール\" class=\"headerlink\" title=\"Laravelをインストール\"></a>Laravelをインストール</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ composer global require laravel/installer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"パスを通す\"><a href=\"#パスを通す\" class=\"headerlink\" title=\"パスを通す\"></a>パスを通す</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"built_in\">export</span> PATH=<span class=\"string\">\"~/.config/composer/vendor/bin:<span class=\"variable\">$PATH</span>\"</span> &gt;&gt; ~/.bash_profile</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"実際に起動しブラウザで確認\"><a href=\"#実際に起動しブラウザで確認\" class=\"headerlink\" title=\"実際に起動しブラウザで確認\"></a>実際に起動しブラウザで確認</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ laravel new <span class=\"built_in\">test</span></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> <span class=\"built_in\">test</span></span><br><span class=\"line\">$ php artisan --version</span><br><span class=\"line\">$ php artisan serve --host 0.0.0.0</span><br><span class=\"line\">Laravel development server started: http://0.0.0.0:8000</span><br></pre></td></tr></table></figure>\n\n<p>ブラウザで接続してみると以下の様な画面が表示される</p>\n<p><img src=\"/images/laravel-dev-create.png\" alt=\"laravel\"></p>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"前提環境\"><a href=\"#前提環境\" class=\"headerlink\" title=\"前提環境\"></a>前提環境</h2><ul>\n<li>Linux Mint19 Mate</li>\n</ul>\n<h2 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h2><h3 id=\"phpをインストール\"><a href=\"#phpをインストール\" class=\"headerlink\" title=\"phpをインストール\"></a>phpをインストール</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt update</span><br><span class=\"line\">$ sudo apt install -y php7.2 php7.2-mbstring php7.2-xml php7.2-gd php7.2-zip</span><br><span class=\"line\">$ sudo apt install -y sqlite3 php7.2-sqlite3 php7.2-mysql</span><br><span class=\"line\">$ php --version</span><br><span class=\"line\">$ php -m</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"composerをインストール\"><a href=\"#composerをインストール\" class=\"headerlink\" title=\"composerをインストール\"></a>composerをインストール</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ curl -sS https://getcomposer.org/installer | php</span><br><span class=\"line\">$ sudo mv composer.phar /usr/<span class=\"built_in\">local</span>/bin/composer</span><br><span class=\"line\">$ sudo chmod +x /usr/<span class=\"built_in\">local</span>/bin/composer</span><br><span class=\"line\">$ composer --version</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Laravelをインストール\"><a href=\"#Laravelをインストール\" class=\"headerlink\" title=\"Laravelをインストール\"></a>Laravelをインストール</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ composer global require laravel/installer</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"パスを通す\"><a href=\"#パスを通す\" class=\"headerlink\" title=\"パスを通す\"></a>パスを通す</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"built_in\">export</span> PATH=<span class=\"string\">\"~/.config/composer/vendor/bin:<span class=\"variable\">$PATH</span>\"</span> &gt;&gt; ~/.bash_profile</span><br><span class=\"line\"><span class=\"built_in\">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"実際に起動しブラウザで確認\"><a href=\"#実際に起動しブラウザで確認\" class=\"headerlink\" title=\"実際に起動しブラウザで確認\"></a>実際に起動しブラウザで確認</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ laravel new <span class=\"built_in\">test</span></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> <span class=\"built_in\">test</span></span><br><span class=\"line\">$ php artisan --version</span><br><span class=\"line\">$ php artisan serve --host 0.0.0.0</span><br><span class=\"line\">Laravel development server started: http://0.0.0.0:8000</span><br></pre></td></tr></table></figure>\n\n<p>ブラウザで接続してみると以下の様な画面が表示される</p>\n<p><img src=\"/images/laravel-dev-create.png\" alt=\"laravel\"></p>\n"},{"layout":"post","title":"Linuxの時間調整【Debian系OS】","date":"2019-11-14T16:02:43.000Z","_content":"\nWindowsを入れている端末にLinuxをインストールすると、\nRTCの時刻がLinuxに変更され、\nWindowsで表示される時間がズレることがあります。\nそんな時にいつも行う操作のメモ\n\n## RTCとは\n\nマザーボードが記憶した時刻です。\nOSを起動した際にマザーボードから時刻が取得できる場合には、\nまず最初にRTCの時刻を取得し、使用されます。\n\n\n> *ポイント*\n> インターネットに繋がる場合は、NTPを利用した時刻同期が行われます。\n> インターネットにも繋がらず、RTCからの時刻取得もできない場合には、\n> 以前シャットダウンした時刻を使用する事があります。(Ubuntu14,16,18で体験)\n\n## 何故Windowsの時刻もズレてしまうのか\n\ntimedatectlコマンドを実行するとわかりますが、\nDebianは少なくとも3つの時刻にアクセスし、それぞれの時刻を変更する事ができます。\n\n```bash\n$ timedatectl\n                      Local time: 金 2019-11-15 01:28:34 JST\n                  Universal time: 木 2019-11-14 16:28:34 UTC\n                        RTC time: 木 2019-11-14 16:28:34\n                       Time zone: Asia/Tokyo (JST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n```\n\n- Local Time(指定したタイムゾーンの時間)\n- Universal Time(世界標準の時間、UTC)\n- RTC Time(マザーボードの時間)\n\nLinux(例えばUbuntu)を起動した際に、\nRTCの時刻がUTC時刻等に合わされて調整されてしまうためです。\n\nこの記事を書いているのは日本時間(JST)でいうとAM 1:00ですが、\nUTCでは9時間前の前日のPM 4:00となっています。\n\nLinuxがデフォルトで持つ時間がUTCであり、\nそれを定期的にRTCに同期を行っているため、\n次にWindowsを起動した場合に、「時刻がズレている」という状態になります。\n\n## じゃあどうするのか\n\nLinuxから２つの操作を行います。\n\n- タイムゾーンを指定し、Local Timeを日本時間に変更\n- Local TimeをRTCに同期する様に変更\n\n## 手順\n\n次の操作はLinux上で行います。\n\n### 現在の時刻と設定を確認する\n\ntimedatectlコマンドを実行し、時刻を確認します。\n\n```bash\n$ timedatectl\n                      Local time: 金 2019-11-15 16:28:34 UTC\n                  Universal time: 木 2019-11-14 16:28:34 UTC\n                        RTC time: 木 2019-11-14 16:28:34\n                       Time zone: UTC (UTC, +0000)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n```\n\nここで確認したいのは\n\n- タイムゾーン\n- RTCへLocal Timeを同期するか\n\nです。\n\nタイムゾーンはUTC、RTCへLocal Timeを同期しない設定となっています。\n\nそのため、次にWindowsを起動した際にはRTCの時刻がズレた状態となります。\n\n### タイムゾーンをJSTにする\n\nJSTとは日本時間の事です。\n\n次のコマンドでタイムゾーンを日本時間に変更します。\n\n```bash\n$ timedatectl set-timezone Asia/Tokyo\n```\n\n念の為、設定が変わった事を確認します。\n\n```bash\n$ timedatectl\n                      Local time: 金 2019-11-15 01:35:59 JST\n                  Universal time: 木 2019-11-14 16:35:59 UTC\n                        RTC time: 木 2019-11-14 16:35:59\n                       Time zone: Asia/Tokyo (JST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n```\n\n### RTCに同期する時刻をLocal Timeにする\n\n次のコマンドでRTCにLocal timeを同期させる設定を行います。\n\n```bash\n$ timedatectl set-local-rtc true\n                      Local time: 金 2019-11-15 01:38:59 JST\n                  Universal time: 木 2019-11-14 16:38:59 UTC\n                        RTC time: 金 2019-11-15 01:38:59\n                       Time zone: Asia/Tokyo (JST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: yes\n\nWarning: The system is configured to read the RTC time in the local time zone.\n         This mode can not be fully supported. It will create various problems\n         with time zone changes and daylight saving time adjustments. The RTC\n         time is never updated, it relies on external facilities to maintain it.\n         If at all possible, use RTC in UTC by calling\n         'timedatectl set-local-rtc 0'.\n```\n\n何やら注意が出ていますが、Google翻訳をかけた所は以下の様なメッセージでした。\n\n> 警告：システムは、ローカルタイムゾーンでRTC時間を読み取るように構成されています。\n>       このモードは完全にはサポートできません。さまざまな問題が発生します\n>       タイムゾーンの変更と夏時間の調整。 \n>       RTC時間が更新されることはなく、外部の設備に依存して維持されます。\n>       可能な場合は、UTCでRTCを使用して呼び出します\n>       'timedatectl set-local-rtc 0'\n\nここでWindowsの時刻がズレない設定は完了です。\n\nUbuntu14,16,18とこの設定を使用していますが、今の所問題は見当たりません。\n\n","source":"_posts/linux-debian-time-adjustment.md","raw":"---\nlayout: post\ntitle: Linuxの時間調整【Debian系OS】\ndate: 2019-11-15 01:02:43\ntags: [Debian,Linux,timedatectl]\n---\n\nWindowsを入れている端末にLinuxをインストールすると、\nRTCの時刻がLinuxに変更され、\nWindowsで表示される時間がズレることがあります。\nそんな時にいつも行う操作のメモ\n\n## RTCとは\n\nマザーボードが記憶した時刻です。\nOSを起動した際にマザーボードから時刻が取得できる場合には、\nまず最初にRTCの時刻を取得し、使用されます。\n\n\n> *ポイント*\n> インターネットに繋がる場合は、NTPを利用した時刻同期が行われます。\n> インターネットにも繋がらず、RTCからの時刻取得もできない場合には、\n> 以前シャットダウンした時刻を使用する事があります。(Ubuntu14,16,18で体験)\n\n## 何故Windowsの時刻もズレてしまうのか\n\ntimedatectlコマンドを実行するとわかりますが、\nDebianは少なくとも3つの時刻にアクセスし、それぞれの時刻を変更する事ができます。\n\n```bash\n$ timedatectl\n                      Local time: 金 2019-11-15 01:28:34 JST\n                  Universal time: 木 2019-11-14 16:28:34 UTC\n                        RTC time: 木 2019-11-14 16:28:34\n                       Time zone: Asia/Tokyo (JST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n```\n\n- Local Time(指定したタイムゾーンの時間)\n- Universal Time(世界標準の時間、UTC)\n- RTC Time(マザーボードの時間)\n\nLinux(例えばUbuntu)を起動した際に、\nRTCの時刻がUTC時刻等に合わされて調整されてしまうためです。\n\nこの記事を書いているのは日本時間(JST)でいうとAM 1:00ですが、\nUTCでは9時間前の前日のPM 4:00となっています。\n\nLinuxがデフォルトで持つ時間がUTCであり、\nそれを定期的にRTCに同期を行っているため、\n次にWindowsを起動した場合に、「時刻がズレている」という状態になります。\n\n## じゃあどうするのか\n\nLinuxから２つの操作を行います。\n\n- タイムゾーンを指定し、Local Timeを日本時間に変更\n- Local TimeをRTCに同期する様に変更\n\n## 手順\n\n次の操作はLinux上で行います。\n\n### 現在の時刻と設定を確認する\n\ntimedatectlコマンドを実行し、時刻を確認します。\n\n```bash\n$ timedatectl\n                      Local time: 金 2019-11-15 16:28:34 UTC\n                  Universal time: 木 2019-11-14 16:28:34 UTC\n                        RTC time: 木 2019-11-14 16:28:34\n                       Time zone: UTC (UTC, +0000)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n```\n\nここで確認したいのは\n\n- タイムゾーン\n- RTCへLocal Timeを同期するか\n\nです。\n\nタイムゾーンはUTC、RTCへLocal Timeを同期しない設定となっています。\n\nそのため、次にWindowsを起動した際にはRTCの時刻がズレた状態となります。\n\n### タイムゾーンをJSTにする\n\nJSTとは日本時間の事です。\n\n次のコマンドでタイムゾーンを日本時間に変更します。\n\n```bash\n$ timedatectl set-timezone Asia/Tokyo\n```\n\n念の為、設定が変わった事を確認します。\n\n```bash\n$ timedatectl\n                      Local time: 金 2019-11-15 01:35:59 JST\n                  Universal time: 木 2019-11-14 16:35:59 UTC\n                        RTC time: 木 2019-11-14 16:35:59\n                       Time zone: Asia/Tokyo (JST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: no\n```\n\n### RTCに同期する時刻をLocal Timeにする\n\n次のコマンドでRTCにLocal timeを同期させる設定を行います。\n\n```bash\n$ timedatectl set-local-rtc true\n                      Local time: 金 2019-11-15 01:38:59 JST\n                  Universal time: 木 2019-11-14 16:38:59 UTC\n                        RTC time: 金 2019-11-15 01:38:59\n                       Time zone: Asia/Tokyo (JST, +0900)\n       System clock synchronized: yes\nsystemd-timesyncd.service active: yes\n                 RTC in local TZ: yes\n\nWarning: The system is configured to read the RTC time in the local time zone.\n         This mode can not be fully supported. It will create various problems\n         with time zone changes and daylight saving time adjustments. The RTC\n         time is never updated, it relies on external facilities to maintain it.\n         If at all possible, use RTC in UTC by calling\n         'timedatectl set-local-rtc 0'.\n```\n\n何やら注意が出ていますが、Google翻訳をかけた所は以下の様なメッセージでした。\n\n> 警告：システムは、ローカルタイムゾーンでRTC時間を読み取るように構成されています。\n>       このモードは完全にはサポートできません。さまざまな問題が発生します\n>       タイムゾーンの変更と夏時間の調整。 \n>       RTC時間が更新されることはなく、外部の設備に依存して維持されます。\n>       可能な場合は、UTCでRTCを使用して呼び出します\n>       'timedatectl set-local-rtc 0'\n\nここでWindowsの時刻がズレない設定は完了です。\n\nUbuntu14,16,18とこの設定を使用していますが、今の所問題は見当たりません。\n\n","slug":"linux-debian-time-adjustment","published":1,"updated":"2019-11-14T16:44:42.644Z","_id":"ck2yxz53x0007shzmdwdj6g19","comments":1,"photos":[],"link":"","content":"<p>Windowsを入れている端末にLinuxをインストールすると、<br>RTCの時刻がLinuxに変更され、<br>Windowsで表示される時間がズレることがあります。<br>そんな時にいつも行う操作のメモ</p>\n<h2 id=\"RTCとは\"><a href=\"#RTCとは\" class=\"headerlink\" title=\"RTCとは\"></a>RTCとは</h2><p>マザーボードが記憶した時刻です。<br>OSを起動した際にマザーボードから時刻が取得できる場合には、<br>まず最初にRTCの時刻を取得し、使用されます。</p>\n<blockquote>\n<p><em>ポイント</em><br>インターネットに繋がる場合は、NTPを利用した時刻同期が行われます。<br>インターネットにも繋がらず、RTCからの時刻取得もできない場合には、<br>以前シャットダウンした時刻を使用する事があります。(Ubuntu14,16,18で体験)</p>\n</blockquote>\n<h2 id=\"何故Windowsの時刻もズレてしまうのか\"><a href=\"#何故Windowsの時刻もズレてしまうのか\" class=\"headerlink\" title=\"何故Windowsの時刻もズレてしまうのか\"></a>何故Windowsの時刻もズレてしまうのか</h2><p>timedatectlコマンドを実行するとわかりますが、<br>Debianは少なくとも3つの時刻にアクセスし、それぞれの時刻を変更する事ができます。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl</span><br><span class=\"line\">                      Local time: 金 2019-11-15 01:28:34 JST</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:28:34 UTC</span><br><span class=\"line\">                        RTC time: 木 2019-11-14 16:28:34</span><br><span class=\"line\">                       Time zone: Asia/Tokyo (JST, +0900)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Local Time(指定したタイムゾーンの時間)</li>\n<li>Universal Time(世界標準の時間、UTC)</li>\n<li>RTC Time(マザーボードの時間)</li>\n</ul>\n<p>Linux(例えばUbuntu)を起動した際に、<br>RTCの時刻がUTC時刻等に合わされて調整されてしまうためです。</p>\n<p>この記事を書いているのは日本時間(JST)でいうとAM 1:00ですが、<br>UTCでは9時間前の前日のPM 4:00となっています。</p>\n<p>Linuxがデフォルトで持つ時間がUTCであり、<br>それを定期的にRTCに同期を行っているため、<br>次にWindowsを起動した場合に、「時刻がズレている」という状態になります。</p>\n<h2 id=\"じゃあどうするのか\"><a href=\"#じゃあどうするのか\" class=\"headerlink\" title=\"じゃあどうするのか\"></a>じゃあどうするのか</h2><p>Linuxから２つの操作を行います。</p>\n<ul>\n<li>タイムゾーンを指定し、Local Timeを日本時間に変更</li>\n<li>Local TimeをRTCに同期する様に変更</li>\n</ul>\n<h2 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h2><p>次の操作はLinux上で行います。</p>\n<h3 id=\"現在の時刻と設定を確認する\"><a href=\"#現在の時刻と設定を確認する\" class=\"headerlink\" title=\"現在の時刻と設定を確認する\"></a>現在の時刻と設定を確認する</h3><p>timedatectlコマンドを実行し、時刻を確認します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl</span><br><span class=\"line\">                      Local time: 金 2019-11-15 16:28:34 UTC</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:28:34 UTC</span><br><span class=\"line\">                        RTC time: 木 2019-11-14 16:28:34</span><br><span class=\"line\">                       Time zone: UTC (UTC, +0000)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n\n<p>ここで確認したいのは</p>\n<ul>\n<li>タイムゾーン</li>\n<li>RTCへLocal Timeを同期するか</li>\n</ul>\n<p>です。</p>\n<p>タイムゾーンはUTC、RTCへLocal Timeを同期しない設定となっています。</p>\n<p>そのため、次にWindowsを起動した際にはRTCの時刻がズレた状態となります。</p>\n<h3 id=\"タイムゾーンをJSTにする\"><a href=\"#タイムゾーンをJSTにする\" class=\"headerlink\" title=\"タイムゾーンをJSTにする\"></a>タイムゾーンをJSTにする</h3><p>JSTとは日本時間の事です。</p>\n<p>次のコマンドでタイムゾーンを日本時間に変更します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl <span class=\"built_in\">set</span>-timezone Asia/Tokyo</span><br></pre></td></tr></table></figure>\n\n<p>念の為、設定が変わった事を確認します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl</span><br><span class=\"line\">                      Local time: 金 2019-11-15 01:35:59 JST</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:35:59 UTC</span><br><span class=\"line\">                        RTC time: 木 2019-11-14 16:35:59</span><br><span class=\"line\">                       Time zone: Asia/Tokyo (JST, +0900)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"RTCに同期する時刻をLocal-Timeにする\"><a href=\"#RTCに同期する時刻をLocal-Timeにする\" class=\"headerlink\" title=\"RTCに同期する時刻をLocal Timeにする\"></a>RTCに同期する時刻をLocal Timeにする</h3><p>次のコマンドでRTCにLocal timeを同期させる設定を行います。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl <span class=\"built_in\">set</span>-local-rtc <span class=\"literal\">true</span></span><br><span class=\"line\">                      Local time: 金 2019-11-15 01:38:59 JST</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:38:59 UTC</span><br><span class=\"line\">                        RTC time: 金 2019-11-15 01:38:59</span><br><span class=\"line\">                       Time zone: Asia/Tokyo (JST, +0900)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: yes</span><br><span class=\"line\"></span><br><span class=\"line\">Warning: The system is configured to <span class=\"built_in\">read</span> the RTC time <span class=\"keyword\">in</span> the <span class=\"built_in\">local</span> time zone.</span><br><span class=\"line\">         This mode can not be fully supported. It will create various problems</span><br><span class=\"line\">         with time zone changes and daylight saving time adjustments. The RTC</span><br><span class=\"line\">         time is never updated, it relies on external facilities to maintain it.</span><br><span class=\"line\">         If at all possible, use RTC <span class=\"keyword\">in</span> UTC by calling</span><br><span class=\"line\">         <span class=\"string\">'timedatectl set-local-rtc 0'</span>.</span><br></pre></td></tr></table></figure>\n\n<p>何やら注意が出ていますが、Google翻訳をかけた所は以下の様なメッセージでした。</p>\n<blockquote>\n<p>警告：システムは、ローカルタイムゾーンでRTC時間を読み取るように構成されています。<br>      このモードは完全にはサポートできません。さまざまな問題が発生します<br>      タイムゾーンの変更と夏時間の調整。<br>      RTC時間が更新されることはなく、外部の設備に依存して維持されます。<br>      可能な場合は、UTCでRTCを使用して呼び出します<br>      ‘timedatectl set-local-rtc 0’</p>\n</blockquote>\n<p>ここでWindowsの時刻がズレない設定は完了です。</p>\n<p>Ubuntu14,16,18とこの設定を使用していますが、今の所問題は見当たりません。</p>\n","site":{"data":{}},"excerpt":"","more":"<p>Windowsを入れている端末にLinuxをインストールすると、<br>RTCの時刻がLinuxに変更され、<br>Windowsで表示される時間がズレることがあります。<br>そんな時にいつも行う操作のメモ</p>\n<h2 id=\"RTCとは\"><a href=\"#RTCとは\" class=\"headerlink\" title=\"RTCとは\"></a>RTCとは</h2><p>マザーボードが記憶した時刻です。<br>OSを起動した際にマザーボードから時刻が取得できる場合には、<br>まず最初にRTCの時刻を取得し、使用されます。</p>\n<blockquote>\n<p><em>ポイント</em><br>インターネットに繋がる場合は、NTPを利用した時刻同期が行われます。<br>インターネットにも繋がらず、RTCからの時刻取得もできない場合には、<br>以前シャットダウンした時刻を使用する事があります。(Ubuntu14,16,18で体験)</p>\n</blockquote>\n<h2 id=\"何故Windowsの時刻もズレてしまうのか\"><a href=\"#何故Windowsの時刻もズレてしまうのか\" class=\"headerlink\" title=\"何故Windowsの時刻もズレてしまうのか\"></a>何故Windowsの時刻もズレてしまうのか</h2><p>timedatectlコマンドを実行するとわかりますが、<br>Debianは少なくとも3つの時刻にアクセスし、それぞれの時刻を変更する事ができます。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl</span><br><span class=\"line\">                      Local time: 金 2019-11-15 01:28:34 JST</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:28:34 UTC</span><br><span class=\"line\">                        RTC time: 木 2019-11-14 16:28:34</span><br><span class=\"line\">                       Time zone: Asia/Tokyo (JST, +0900)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li>Local Time(指定したタイムゾーンの時間)</li>\n<li>Universal Time(世界標準の時間、UTC)</li>\n<li>RTC Time(マザーボードの時間)</li>\n</ul>\n<p>Linux(例えばUbuntu)を起動した際に、<br>RTCの時刻がUTC時刻等に合わされて調整されてしまうためです。</p>\n<p>この記事を書いているのは日本時間(JST)でいうとAM 1:00ですが、<br>UTCでは9時間前の前日のPM 4:00となっています。</p>\n<p>Linuxがデフォルトで持つ時間がUTCであり、<br>それを定期的にRTCに同期を行っているため、<br>次にWindowsを起動した場合に、「時刻がズレている」という状態になります。</p>\n<h2 id=\"じゃあどうするのか\"><a href=\"#じゃあどうするのか\" class=\"headerlink\" title=\"じゃあどうするのか\"></a>じゃあどうするのか</h2><p>Linuxから２つの操作を行います。</p>\n<ul>\n<li>タイムゾーンを指定し、Local Timeを日本時間に変更</li>\n<li>Local TimeをRTCに同期する様に変更</li>\n</ul>\n<h2 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h2><p>次の操作はLinux上で行います。</p>\n<h3 id=\"現在の時刻と設定を確認する\"><a href=\"#現在の時刻と設定を確認する\" class=\"headerlink\" title=\"現在の時刻と設定を確認する\"></a>現在の時刻と設定を確認する</h3><p>timedatectlコマンドを実行し、時刻を確認します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl</span><br><span class=\"line\">                      Local time: 金 2019-11-15 16:28:34 UTC</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:28:34 UTC</span><br><span class=\"line\">                        RTC time: 木 2019-11-14 16:28:34</span><br><span class=\"line\">                       Time zone: UTC (UTC, +0000)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n\n<p>ここで確認したいのは</p>\n<ul>\n<li>タイムゾーン</li>\n<li>RTCへLocal Timeを同期するか</li>\n</ul>\n<p>です。</p>\n<p>タイムゾーンはUTC、RTCへLocal Timeを同期しない設定となっています。</p>\n<p>そのため、次にWindowsを起動した際にはRTCの時刻がズレた状態となります。</p>\n<h3 id=\"タイムゾーンをJSTにする\"><a href=\"#タイムゾーンをJSTにする\" class=\"headerlink\" title=\"タイムゾーンをJSTにする\"></a>タイムゾーンをJSTにする</h3><p>JSTとは日本時間の事です。</p>\n<p>次のコマンドでタイムゾーンを日本時間に変更します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl <span class=\"built_in\">set</span>-timezone Asia/Tokyo</span><br></pre></td></tr></table></figure>\n\n<p>念の為、設定が変わった事を確認します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl</span><br><span class=\"line\">                      Local time: 金 2019-11-15 01:35:59 JST</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:35:59 UTC</span><br><span class=\"line\">                        RTC time: 木 2019-11-14 16:35:59</span><br><span class=\"line\">                       Time zone: Asia/Tokyo (JST, +0900)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: no</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"RTCに同期する時刻をLocal-Timeにする\"><a href=\"#RTCに同期する時刻をLocal-Timeにする\" class=\"headerlink\" title=\"RTCに同期する時刻をLocal Timeにする\"></a>RTCに同期する時刻をLocal Timeにする</h3><p>次のコマンドでRTCにLocal timeを同期させる設定を行います。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ timedatectl <span class=\"built_in\">set</span>-local-rtc <span class=\"literal\">true</span></span><br><span class=\"line\">                      Local time: 金 2019-11-15 01:38:59 JST</span><br><span class=\"line\">                  Universal time: 木 2019-11-14 16:38:59 UTC</span><br><span class=\"line\">                        RTC time: 金 2019-11-15 01:38:59</span><br><span class=\"line\">                       Time zone: Asia/Tokyo (JST, +0900)</span><br><span class=\"line\">       System clock synchronized: yes</span><br><span class=\"line\">systemd-timesyncd.service active: yes</span><br><span class=\"line\">                 RTC <span class=\"keyword\">in</span> <span class=\"built_in\">local</span> TZ: yes</span><br><span class=\"line\"></span><br><span class=\"line\">Warning: The system is configured to <span class=\"built_in\">read</span> the RTC time <span class=\"keyword\">in</span> the <span class=\"built_in\">local</span> time zone.</span><br><span class=\"line\">         This mode can not be fully supported. It will create various problems</span><br><span class=\"line\">         with time zone changes and daylight saving time adjustments. The RTC</span><br><span class=\"line\">         time is never updated, it relies on external facilities to maintain it.</span><br><span class=\"line\">         If at all possible, use RTC <span class=\"keyword\">in</span> UTC by calling</span><br><span class=\"line\">         <span class=\"string\">'timedatectl set-local-rtc 0'</span>.</span><br></pre></td></tr></table></figure>\n\n<p>何やら注意が出ていますが、Google翻訳をかけた所は以下の様なメッセージでした。</p>\n<blockquote>\n<p>警告：システムは、ローカルタイムゾーンでRTC時間を読み取るように構成されています。<br>      このモードは完全にはサポートできません。さまざまな問題が発生します<br>      タイムゾーンの変更と夏時間の調整。<br>      RTC時間が更新されることはなく、外部の設備に依存して維持されます。<br>      可能な場合は、UTCでRTCを使用して呼び出します<br>      ‘timedatectl set-local-rtc 0’</p>\n</blockquote>\n<p>ここでWindowsの時刻がズレない設定は完了です。</p>\n<p>Ubuntu14,16,18とこの設定を使用していますが、今の所問題は見当たりません。</p>\n"},{"title":"VagrantでMint19デスクトップ環境を立ち上げる","date":"2019-10-26T05:21:32.000Z","_content":"\n## virtualboxをインストール\n\n[ここ](https://www.virtualbox.org/wiki/Downloads)からダウンロードできる\n\n## vagrantをインストール\n\n[ここ](https://www.vagrantup.com/downloads.html)からダウンロードできる\n\nコマンドが使用できる様になっている事を確認する\n\n```bash\n$ vagrant --help\n```\n\n## Hyper-Vを無効化する（Windowsの場合）\n\nPowerShellを管理者権限で起動し、以下コマンドを実行する\n\n```PowerShell\n> Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All\n```\n\n## Mint19Mateデスクトップ環境を立ち上げる\n\n### boxを追加する\n\nターミナルにて以下のコマンドを実行します。\n\n```bash\n$ vagrant box add antonilin/mint-19-mate\n```\n\n### プロジェクトディレクトリを作成して初期化する\n\n```bash\n$ mkdir mint19mate\n$ cd mint19mate\n$ vagrant init antonilin/mint-19-mate\n```\n\n### Mint19を起動\n\n```bash\n$ vagrant up\n```\n\n> **メモ**\n> Windows環境では、ここでUSB2.0のサポートを無効にしろと言われたので無効にする必要がありました。\n","source":"_posts/vagrant-up-mint19-desktop.md","raw":"---\ntitle: VagrantでMint19デスクトップ環境を立ち上げる\ndate: 2019-10-26 14:21:32\ntags: [vagrant]\n---\n\n## virtualboxをインストール\n\n[ここ](https://www.virtualbox.org/wiki/Downloads)からダウンロードできる\n\n## vagrantをインストール\n\n[ここ](https://www.vagrantup.com/downloads.html)からダウンロードできる\n\nコマンドが使用できる様になっている事を確認する\n\n```bash\n$ vagrant --help\n```\n\n## Hyper-Vを無効化する（Windowsの場合）\n\nPowerShellを管理者権限で起動し、以下コマンドを実行する\n\n```PowerShell\n> Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All\n```\n\n## Mint19Mateデスクトップ環境を立ち上げる\n\n### boxを追加する\n\nターミナルにて以下のコマンドを実行します。\n\n```bash\n$ vagrant box add antonilin/mint-19-mate\n```\n\n### プロジェクトディレクトリを作成して初期化する\n\n```bash\n$ mkdir mint19mate\n$ cd mint19mate\n$ vagrant init antonilin/mint-19-mate\n```\n\n### Mint19を起動\n\n```bash\n$ vagrant up\n```\n\n> **メモ**\n> Windows環境では、ここでUSB2.0のサポートを無効にしろと言われたので無効にする必要がありました。\n","slug":"vagrant-up-mint19-desktop","published":1,"updated":"2019-11-14T16:02:17.058Z","_id":"ck2yxz53z0008shzmn13vso6r","comments":1,"layout":"post","photos":[],"link":"","content":"<h2 id=\"virtualboxをインストール\"><a href=\"#virtualboxをインストール\" class=\"headerlink\" title=\"virtualboxをインストール\"></a>virtualboxをインストール</h2><p><a href=\"https://www.virtualbox.org/wiki/Downloads\" target=\"_blank\" rel=\"noopener\">ここ</a>からダウンロードできる</p>\n<h2 id=\"vagrantをインストール\"><a href=\"#vagrantをインストール\" class=\"headerlink\" title=\"vagrantをインストール\"></a>vagrantをインストール</h2><p><a href=\"https://www.vagrantup.com/downloads.html\" target=\"_blank\" rel=\"noopener\">ここ</a>からダウンロードできる</p>\n<p>コマンドが使用できる様になっている事を確認する</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vagrant --<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Hyper-Vを無効化する（Windowsの場合）\"><a href=\"#Hyper-Vを無効化する（Windowsの場合）\" class=\"headerlink\" title=\"Hyper-Vを無効化する（Windowsの場合）\"></a>Hyper-Vを無効化する（Windowsの場合）</h2><p>PowerShellを管理者権限で起動し、以下コマンドを実行する</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Mint19Mateデスクトップ環境を立ち上げる\"><a href=\"#Mint19Mateデスクトップ環境を立ち上げる\" class=\"headerlink\" title=\"Mint19Mateデスクトップ環境を立ち上げる\"></a>Mint19Mateデスクトップ環境を立ち上げる</h2><h3 id=\"boxを追加する\"><a href=\"#boxを追加する\" class=\"headerlink\" title=\"boxを追加する\"></a>boxを追加する</h3><p>ターミナルにて以下のコマンドを実行します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vagrant box add antonilin/mint-19-mate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"プロジェクトディレクトリを作成して初期化する\"><a href=\"#プロジェクトディレクトリを作成して初期化する\" class=\"headerlink\" title=\"プロジェクトディレクトリを作成して初期化する\"></a>プロジェクトディレクトリを作成して初期化する</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir mint19mate</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> mint19mate</span><br><span class=\"line\">$ vagrant init antonilin/mint-19-mate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Mint19を起動\"><a href=\"#Mint19を起動\" class=\"headerlink\" title=\"Mint19を起動\"></a>Mint19を起動</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vagrant up</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>メモ</strong><br>Windows環境では、ここでUSB2.0のサポートを無効にしろと言われたので無効にする必要がありました。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<h2 id=\"virtualboxをインストール\"><a href=\"#virtualboxをインストール\" class=\"headerlink\" title=\"virtualboxをインストール\"></a>virtualboxをインストール</h2><p><a href=\"https://www.virtualbox.org/wiki/Downloads\" target=\"_blank\" rel=\"noopener\">ここ</a>からダウンロードできる</p>\n<h2 id=\"vagrantをインストール\"><a href=\"#vagrantをインストール\" class=\"headerlink\" title=\"vagrantをインストール\"></a>vagrantをインストール</h2><p><a href=\"https://www.vagrantup.com/downloads.html\" target=\"_blank\" rel=\"noopener\">ここ</a>からダウンロードできる</p>\n<p>コマンドが使用できる様になっている事を確認する</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vagrant --<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Hyper-Vを無効化する（Windowsの場合）\"><a href=\"#Hyper-Vを無効化する（Windowsの場合）\" class=\"headerlink\" title=\"Hyper-Vを無効化する（Windowsの場合）\"></a>Hyper-Vを無効化する（Windowsの場合）</h2><p>PowerShellを管理者権限で起動し、以下コマンドを実行する</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt; Disable-WindowsOptionalFeature -Online -FeatureName Microsoft-Hyper-V-All</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"Mint19Mateデスクトップ環境を立ち上げる\"><a href=\"#Mint19Mateデスクトップ環境を立ち上げる\" class=\"headerlink\" title=\"Mint19Mateデスクトップ環境を立ち上げる\"></a>Mint19Mateデスクトップ環境を立ち上げる</h2><h3 id=\"boxを追加する\"><a href=\"#boxを追加する\" class=\"headerlink\" title=\"boxを追加する\"></a>boxを追加する</h3><p>ターミナルにて以下のコマンドを実行します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vagrant box add antonilin/mint-19-mate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"プロジェクトディレクトリを作成して初期化する\"><a href=\"#プロジェクトディレクトリを作成して初期化する\" class=\"headerlink\" title=\"プロジェクトディレクトリを作成して初期化する\"></a>プロジェクトディレクトリを作成して初期化する</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir mint19mate</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> mint19mate</span><br><span class=\"line\">$ vagrant init antonilin/mint-19-mate</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"Mint19を起動\"><a href=\"#Mint19を起動\" class=\"headerlink\" title=\"Mint19を起動\"></a>Mint19を起動</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vagrant up</span><br></pre></td></tr></table></figure>\n\n<blockquote>\n<p><strong>メモ</strong><br>Windows環境では、ここでUSB2.0のサポートを無効にしろと言われたので無効にする必要がありました。</p>\n</blockquote>\n"},{"title":"initrdを展開・編集・作成する","date":"2019-10-20T06:25:37.000Z","_content":"\nUbuntuOSベースのシンクライアントを作成していた時、\n起動時のスプラッシュロゴ表示や、ファイルシステムの復号化処理を行うため、\ninitrd内部の書き換えを行っていました\n\nなかなかプライベートで触る事は少ないため、書き残しておきます。\n\n# 環境\n\n- Linux Mint 19\n\n# initrdとは\n\nLinuxを起動する際に、各ディストリビューションとして動作するために必要なサービスやドライバが含まれたファイル群を固めた物\n\nLinuxが起動する時には、基本的に以下の順序で読み込まれていく\n\n- 1.UEFI\n- 2.ブートローダ\n- 3.カーネル\n- 4.init\n\nカーネルを読み込み基本的なコマンドを使用できる状態にしてから、initrdをマウント、initrd内部の/initを実行する\n\nLinux起動時に黒画面に出現するログは、大半がinitを実行している時に出ている\n\n# 手順\n\n## initrdを作業ディレクトリにコピーする\n\n/bootフォルダ以下に似たような名前のファイルがあるため、それをコピーしてください\n\n```bash\n$ mkdir work # 作業フォルダ作成\n$ cd work\n$ cp /boot/initrd.img-4.15.0-54-generic ./initrd\n```\n\n## zcatで復号しつつ、ファイルとして出力\n\n```bash\n$ mkdir initrdfiles\n$ cd initrdfiles\n$ zcat ../initrd | cpio -idmv\n```\n\n## ファイルを確認\n\n```bash\n$ ls\nbin  conf  etc  init  lib  lib64  run  sbin  scripts  usr  var\n```\n\n## initを見てみる\n\n```bash\n$ vi init\n```\n\n詳しくは触れませんが、shによって実行できる形で書かれている事がわかります。\n\n```bash\n#!/bin/sh\n\n# Default PATH differs between shells, and is not automatically exported\n# by klibc dash.  Make it consistent.\nexport PATH=/sbin:/usr/sbin:/bin:/usr/bin\n\n[ -d /dev ] || mkdir -m 0755 /dev\n[ -d /root ] || mkdir -m 0700 /root\n[ -d /sys ] || mkdir /sys\n[ -d /proc ] || mkdir /proc\n[ -d /tmp ] || mkdir /tmp\nmkdir -p /var/lock\nmount -t sysfs -o nodev,noexec,nosuid sysfs /sys\nmount -t proc -o nodev,noexec,nosuid proc /proc\n\ncase \" $(cat /proc/cmdline) \" in\n*\\ quiet\\ *)\n\tquiet=y\n\t;;\n*)\n\tquiet=n\n\techo \"Loading, please wait...\"\n\t;;\nesac\nexport quiet\n\n# Note that this only becomes /dev on the real filesystem if udev's scripts\n# are used; which they will be, but it's worth pointing out\nmount -t devtmpfs -o nosuid,mode=0755 udev /dev\nmkdir /dev/pts\nmount -t devpts -o noexec,nosuid,gid=5,mode=0620 devpts /dev/pts || true\nmount -t tmpfs -o \"noexec,nosuid,size=10%,mode=0755\" tmpfs /run\nmkdir -m 0755 /run/initramfs\n\n# Export the dpkg architecture\nexport DPKG_ARCH=\n. /conf/arch.conf\n\n# Set modprobe env\nexport MODPROBE_OPTIONS=\"-qb\"\n\n# Export relevant variables\nexport ROOT=\nexport ROOTDELAY=\nexport ROOTFLAGS=\nexport ROOTFSTYPE=\nexport IP=\nexport IP6=\nexport BOOT=\nexport BOOTIF=\nexport UBIMTD=\nexport break=\nexport init=/sbin/init\nexport readonly=y\nexport rootmnt=/root\nexport debug=\nexport panic=\nexport blacklist=\nexport resume=\nexport resume_offset=\nexport drop_caps=\nexport fastboot=n\nexport forcefsck=n\nexport fsckfix=\nexport recovery=\nexport NETWORK_SKIP_ENSLAVED=\n\n\n# mdadm needs hostname to be set. This has to be done before the udev rules are called!\nif [ -f \"/etc/hostname\" ]; then\n        /bin/hostname -F /etc/hostname >/dev/null 2>&1\nfi\n\n# Bring in the main config\n. /conf/initramfs.conf\nfor conf in conf/conf.d/*; do\n\t[ -f ${conf} ] && . ${conf}\ndone\n. /scripts/functions\n\n# Parse command line options\nfor x in $(cat /proc/cmdline); do\n\tcase $x in\n\tinit=*)\n\t\tinit=${x#init=}\n\t\t;;\n\troot=*)\n\t\tROOT=${x#root=}\n\t\tif [ -z \"${BOOT}\" ] && [ \"$ROOT\" = \"/dev/nfs\" ]; then\n\t\t\tBOOT=nfs\n\t\tfi\n                ;;\n\trootflags=*)\n\t\tROOTFLAGS=\"-o ${x#rootflags=}\"\n\t\t;;\n\trootfstype=*)\n\t\tROOTFSTYPE=\"${x#rootfstype=}\"\n\t\t;;\n\trootdelay=*)\n\t\tROOTDELAY=\"${x#rootdelay=}\"\n\t\tcase ${ROOTDELAY} in\n\t\t*[![:digit:].]*)\n\t\t\tROOTDELAY=\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tresumedelay=*)\n\t\tRESUMEDELAY=\"${x#resumedelay=}\"\n\t\t;;\n\tloop=*)\n\t\tLOOP=\"${x#loop=}\"\n\t\t;;\n\tloopflags=*)\n\t\tLOOPFLAGS=\"-o ${x#loopflags=}\"\n\t\t;;\n\tloopfstype=*)\n\t\tLOOPFSTYPE=\"${x#loopfstype=}\"\n\t\t;;\n\tcryptopts=*)\n\t\tcryptopts=\"${x#cryptopts=}\"\n\t\t;;\n\tnfsroot=*)\n\t\tNFSROOT=\"${x#nfsroot=}\"\n\t\t;;\n\tnetboot=*)\n\t\tNETBOOT=\"${x#netboot=}\"\n\t\t;;\n\tip=*)\n\t\tIP=\"${x#ip=}\"\n\t\t;;\n\tip6=*)\n\t\tIP6=\"${x#ip6=}\"\n\t\t;;\n\tboot=*)\n\t\tBOOT=${x#boot=}\n\t\t;;\n\tubi.mtd=*)\n\t\tUBIMTD=${x#ubi.mtd=}\n\t\t;;\n\tresume=*)\n\t\tRESUME=\"${x#resume=}\"\n\t\tcase $RESUME in\n\t        UUID=*)\n\t\t\tRESUME=\"/dev/disk/by-uuid/${RESUME#UUID=}\"\n\t\tesac\n\t\t;;\n\tresume_offset=*)\n\t\tresume_offset=\"${x#resume_offset=}\"\n\t\t;;\n\tnoresume)\n\t\tnoresume=y\n\t\t;;\n\tdrop_capabilities=*)\n\t\tdrop_caps=\"-d ${x#drop_capabilities=}\"\n\t\t;;\n\tpanic=*)\n\t\tpanic=\"${x#panic=}\"\n\t\tcase ${panic} in\n\t\t*[![:digit:].]*)\n\t\t\tpanic=\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tro)\n\t\treadonly=y\n\t\t;;\n\trw)\n\t\treadonly=n\n\t\t;;\n\tdebug)\n\t\tdebug=y\n\t\tquiet=n\n\t\tif [ -n \"${netconsole}\" ]; then\n\t\t\texec >/dev/kmsg 2>&1\n\t\telse\n\t\t\texec >/run/initramfs/initramfs.debug 2>&1\n\t\tfi\n\t\tset -x\n\t\t;;\n\tdebug=*)\n\t\tdebug=y\n\t\tquiet=n\n\t\tset -x\n\t\t;;\n\tbreak=*)\n\t\tbreak=${x#break=}\n\t\t;;\n\tbreak)\n\t\tbreak=premount\n\t\t;;\n\tblacklist=*)\n\t\tblacklist=${x#blacklist=}\n\t\t;;\n\tnetconsole=*)\n\t\tnetconsole=${x#netconsole=}\n\t\t[ \"x$debug\" = \"xy\" ] && exec >/dev/kmsg 2>&1\n\t\t;;\n\tBOOTIF=*)\n\t\tBOOTIF=${x#BOOTIF=}\n\t\t;;\n\thwaddr=*)\n\t\tBOOTIF=${x#hwaddr=}\n\t\t;;\n\tfastboot|fsck.mode=skip)\n\t\tfastboot=y\n\t\t;;\n\tforcefsck|fsck.mode=force)\n\t\tforcefsck=y\n\t\t;;\n\tfsckfix|fsck.repair=yes)\n\t\tfsckfix=y\n\t\t;;\n\tfsck.repair=no)\n\t\tfsckfix=n\n\t\t;;\n\trecovery)\n\t\trecovery=y\n\t\t;;\n\tesac\ndone\n\n# Default to BOOT=local if no boot script defined.\nif [ -z \"${BOOT}\" ]; then\n\tBOOT=local\nfi\n\nif [ -n \"${noresume}\" ] || [ \"$RESUME\" = none ]; then\n\texport noresume=y\n\tunset resume\nelse\n\tresume=${RESUME:-}\nfi\n\nmaybe_break top\n\n# export BOOT variable value for compcache,\n# so we know if we run from casper\nexport BOOT\n\n# Don't do log messages here to avoid confusing graphical boots\nrun_scripts /scripts/init-top\n\nmaybe_break modules\n[ \"$quiet\" != \"y\" ] && log_begin_msg \"Loading essential drivers\"\n[ -n \"${netconsole}\" ] && modprobe netconsole netconsole=\"${netconsole}\"\nload_modules\n[ \"$quiet\" != \"y\" ] && log_end_msg\n\nmaybe_break premount\n[ \"$quiet\" != \"y\" ] && log_begin_msg \"Running /scripts/init-premount\"\nrun_scripts /scripts/init-premount\n[ \"$quiet\" != \"y\" ] && log_end_msg\n\nmaybe_break mount\nlog_begin_msg \"Mounting root file system\"\n# Always load local and nfs (since these might be needed for /etc or\n# /usr, irrespective of the boot script used to mount the rootfs).\n. /scripts/local\n. /scripts/nfs\n. /scripts/${BOOT}\nparse_numeric ${ROOT}\nmaybe_break mountroot\nmount_top\nmount_premount\nmountroot\nlog_end_msg\n\nif read_fstab_entry /usr; then\n\tlog_begin_msg \"Mounting /usr file system\"\n\tmountfs /usr\n\tlog_end_msg\nfi\n\n# Mount cleanup\nmount_bottom\nnfs_bottom\nlocal_bottom\n\nmaybe_break bottom\n[ \"$quiet\" != \"y\" ] && log_begin_msg \"Running /scripts/init-bottom\"\n# We expect udev's init-bottom script to move /dev to ${rootmnt}/dev\nrun_scripts /scripts/init-bottom\n[ \"$quiet\" != \"y\" ] && log_end_msg\n\n# Move /run to the root\nmount -n -o move /run ${rootmnt}/run\n\nvalidate_init() {\n\trun-init -n \"${rootmnt}\" \"${1}\"\n}\n\n# Check init is really there\nif ! validate_init \"$init\"; then\n\techo \"Target filesystem doesn't have requested ${init}.\"\n\tinit=\n\tfor inittest in /sbin/init /etc/init /bin/init /bin/sh; do\n\t\tif validate_init \"${inittest}\"; then\n\t\t\tinit=\"$inittest\"\n\t\t\tbreak\n\t\tfi\n\tdone\nfi\n\n# No init on rootmount\nif ! validate_init \"${init}\" ; then\n\tpanic \"No init found. Try passing init= bootarg.\"\nfi\n\nmaybe_break init\n\n# don't leak too much of env - some init(8) don't clear it\n# (keep init, rootmnt, drop_caps)\nunset debug\nunset MODPROBE_OPTIONS\nunset DPKG_ARCH\nunset ROOTFLAGS\nunset ROOTFSTYPE\nunset ROOTDELAY\nunset ROOT\nunset IP\nunset IP6\nunset BOOT\nunset BOOTIF\nunset UBIMTD\nunset blacklist\nunset break\nunset noresume\nunset panic\nunset quiet\nunset readonly\nunset resume\nunset resume_offset\nunset fastboot\nunset forcefsck\nunset fsckfix\n\n# Move virtual filesystems over to the real filesystem\nmount -n -o move /sys ${rootmnt}/sys\nmount -n -o move /proc ${rootmnt}/proc\n\n# Chain to real filesystem\nexec run-init ${drop_caps} ${rootmnt} ${init} \"$@\" ${recovery:+--startup-event=recovery} <${rootmnt}/dev/console >${rootmnt}/dev/console 2>&1\necho \"Something went badly wrong in the initramfs.\"\npanic \"Please file a bug on initramfs-tools.\"\n```\n\nまたこのinitを実行するタイミングではルートファイルをマウントしていないため、ルートにある/binや/sbinを利用できません。\n\n代わりに、initrd内部の/binや/sbinを利用しています。\n\nそのため、ここにバイナリを配置しておく事で起動中に使用できる様になります。\n\n> **注意**\n> バイナリの実行のために、別途moduleの追加が必要だったりもします。\n\n## initrdを作成する\n\n展開後のファイルが配置されているフォルダで行います。\ncpioによるアーカイブ化、gzipによる圧縮を同時に行い元の状態に戻します。\n\n```bash\n$ find | cpio -o -H newc  | gzip -c > ../initrd.img-4.15.0-54-generic\n```\n\n作成されたinitrdを元の/boot/initrdと入れ替えても起動する事が確認できるかと思います。\n\ninitrdの編集は以上の操作で行います。\n\n## init実行中に処理を止める\n\n/boot/grub/grub.cfgのlinuxオプションが書かれている箇所にbreak=initとオプションを追加する事で処理が停止します。\ninitrd内のデバッグは、このタイミングで一旦止め、initrd内のリソースを使用したコマンド操作が可能です。\n処理を進める場合には、exitコマンドを実行し、続行させる事ができます。\n\n> **注意**\n> HyperV上に起動したLinuxMint19では、このタイミングではコンソールの描画が行われませんでした。\n> そのため実機で行う事をおすすめします。\n","source":"_posts/initrd-unpack-edit-compress.md","raw":"---\ntitle: initrdを展開・編集・作成する\ndate: 2019-10-20 15:25:37\ntags: [Linux,init]\n---\n\nUbuntuOSベースのシンクライアントを作成していた時、\n起動時のスプラッシュロゴ表示や、ファイルシステムの復号化処理を行うため、\ninitrd内部の書き換えを行っていました\n\nなかなかプライベートで触る事は少ないため、書き残しておきます。\n\n# 環境\n\n- Linux Mint 19\n\n# initrdとは\n\nLinuxを起動する際に、各ディストリビューションとして動作するために必要なサービスやドライバが含まれたファイル群を固めた物\n\nLinuxが起動する時には、基本的に以下の順序で読み込まれていく\n\n- 1.UEFI\n- 2.ブートローダ\n- 3.カーネル\n- 4.init\n\nカーネルを読み込み基本的なコマンドを使用できる状態にしてから、initrdをマウント、initrd内部の/initを実行する\n\nLinux起動時に黒画面に出現するログは、大半がinitを実行している時に出ている\n\n# 手順\n\n## initrdを作業ディレクトリにコピーする\n\n/bootフォルダ以下に似たような名前のファイルがあるため、それをコピーしてください\n\n```bash\n$ mkdir work # 作業フォルダ作成\n$ cd work\n$ cp /boot/initrd.img-4.15.0-54-generic ./initrd\n```\n\n## zcatで復号しつつ、ファイルとして出力\n\n```bash\n$ mkdir initrdfiles\n$ cd initrdfiles\n$ zcat ../initrd | cpio -idmv\n```\n\n## ファイルを確認\n\n```bash\n$ ls\nbin  conf  etc  init  lib  lib64  run  sbin  scripts  usr  var\n```\n\n## initを見てみる\n\n```bash\n$ vi init\n```\n\n詳しくは触れませんが、shによって実行できる形で書かれている事がわかります。\n\n```bash\n#!/bin/sh\n\n# Default PATH differs between shells, and is not automatically exported\n# by klibc dash.  Make it consistent.\nexport PATH=/sbin:/usr/sbin:/bin:/usr/bin\n\n[ -d /dev ] || mkdir -m 0755 /dev\n[ -d /root ] || mkdir -m 0700 /root\n[ -d /sys ] || mkdir /sys\n[ -d /proc ] || mkdir /proc\n[ -d /tmp ] || mkdir /tmp\nmkdir -p /var/lock\nmount -t sysfs -o nodev,noexec,nosuid sysfs /sys\nmount -t proc -o nodev,noexec,nosuid proc /proc\n\ncase \" $(cat /proc/cmdline) \" in\n*\\ quiet\\ *)\n\tquiet=y\n\t;;\n*)\n\tquiet=n\n\techo \"Loading, please wait...\"\n\t;;\nesac\nexport quiet\n\n# Note that this only becomes /dev on the real filesystem if udev's scripts\n# are used; which they will be, but it's worth pointing out\nmount -t devtmpfs -o nosuid,mode=0755 udev /dev\nmkdir /dev/pts\nmount -t devpts -o noexec,nosuid,gid=5,mode=0620 devpts /dev/pts || true\nmount -t tmpfs -o \"noexec,nosuid,size=10%,mode=0755\" tmpfs /run\nmkdir -m 0755 /run/initramfs\n\n# Export the dpkg architecture\nexport DPKG_ARCH=\n. /conf/arch.conf\n\n# Set modprobe env\nexport MODPROBE_OPTIONS=\"-qb\"\n\n# Export relevant variables\nexport ROOT=\nexport ROOTDELAY=\nexport ROOTFLAGS=\nexport ROOTFSTYPE=\nexport IP=\nexport IP6=\nexport BOOT=\nexport BOOTIF=\nexport UBIMTD=\nexport break=\nexport init=/sbin/init\nexport readonly=y\nexport rootmnt=/root\nexport debug=\nexport panic=\nexport blacklist=\nexport resume=\nexport resume_offset=\nexport drop_caps=\nexport fastboot=n\nexport forcefsck=n\nexport fsckfix=\nexport recovery=\nexport NETWORK_SKIP_ENSLAVED=\n\n\n# mdadm needs hostname to be set. This has to be done before the udev rules are called!\nif [ -f \"/etc/hostname\" ]; then\n        /bin/hostname -F /etc/hostname >/dev/null 2>&1\nfi\n\n# Bring in the main config\n. /conf/initramfs.conf\nfor conf in conf/conf.d/*; do\n\t[ -f ${conf} ] && . ${conf}\ndone\n. /scripts/functions\n\n# Parse command line options\nfor x in $(cat /proc/cmdline); do\n\tcase $x in\n\tinit=*)\n\t\tinit=${x#init=}\n\t\t;;\n\troot=*)\n\t\tROOT=${x#root=}\n\t\tif [ -z \"${BOOT}\" ] && [ \"$ROOT\" = \"/dev/nfs\" ]; then\n\t\t\tBOOT=nfs\n\t\tfi\n                ;;\n\trootflags=*)\n\t\tROOTFLAGS=\"-o ${x#rootflags=}\"\n\t\t;;\n\trootfstype=*)\n\t\tROOTFSTYPE=\"${x#rootfstype=}\"\n\t\t;;\n\trootdelay=*)\n\t\tROOTDELAY=\"${x#rootdelay=}\"\n\t\tcase ${ROOTDELAY} in\n\t\t*[![:digit:].]*)\n\t\t\tROOTDELAY=\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tresumedelay=*)\n\t\tRESUMEDELAY=\"${x#resumedelay=}\"\n\t\t;;\n\tloop=*)\n\t\tLOOP=\"${x#loop=}\"\n\t\t;;\n\tloopflags=*)\n\t\tLOOPFLAGS=\"-o ${x#loopflags=}\"\n\t\t;;\n\tloopfstype=*)\n\t\tLOOPFSTYPE=\"${x#loopfstype=}\"\n\t\t;;\n\tcryptopts=*)\n\t\tcryptopts=\"${x#cryptopts=}\"\n\t\t;;\n\tnfsroot=*)\n\t\tNFSROOT=\"${x#nfsroot=}\"\n\t\t;;\n\tnetboot=*)\n\t\tNETBOOT=\"${x#netboot=}\"\n\t\t;;\n\tip=*)\n\t\tIP=\"${x#ip=}\"\n\t\t;;\n\tip6=*)\n\t\tIP6=\"${x#ip6=}\"\n\t\t;;\n\tboot=*)\n\t\tBOOT=${x#boot=}\n\t\t;;\n\tubi.mtd=*)\n\t\tUBIMTD=${x#ubi.mtd=}\n\t\t;;\n\tresume=*)\n\t\tRESUME=\"${x#resume=}\"\n\t\tcase $RESUME in\n\t        UUID=*)\n\t\t\tRESUME=\"/dev/disk/by-uuid/${RESUME#UUID=}\"\n\t\tesac\n\t\t;;\n\tresume_offset=*)\n\t\tresume_offset=\"${x#resume_offset=}\"\n\t\t;;\n\tnoresume)\n\t\tnoresume=y\n\t\t;;\n\tdrop_capabilities=*)\n\t\tdrop_caps=\"-d ${x#drop_capabilities=}\"\n\t\t;;\n\tpanic=*)\n\t\tpanic=\"${x#panic=}\"\n\t\tcase ${panic} in\n\t\t*[![:digit:].]*)\n\t\t\tpanic=\n\t\t\t;;\n\t\tesac\n\t\t;;\n\tro)\n\t\treadonly=y\n\t\t;;\n\trw)\n\t\treadonly=n\n\t\t;;\n\tdebug)\n\t\tdebug=y\n\t\tquiet=n\n\t\tif [ -n \"${netconsole}\" ]; then\n\t\t\texec >/dev/kmsg 2>&1\n\t\telse\n\t\t\texec >/run/initramfs/initramfs.debug 2>&1\n\t\tfi\n\t\tset -x\n\t\t;;\n\tdebug=*)\n\t\tdebug=y\n\t\tquiet=n\n\t\tset -x\n\t\t;;\n\tbreak=*)\n\t\tbreak=${x#break=}\n\t\t;;\n\tbreak)\n\t\tbreak=premount\n\t\t;;\n\tblacklist=*)\n\t\tblacklist=${x#blacklist=}\n\t\t;;\n\tnetconsole=*)\n\t\tnetconsole=${x#netconsole=}\n\t\t[ \"x$debug\" = \"xy\" ] && exec >/dev/kmsg 2>&1\n\t\t;;\n\tBOOTIF=*)\n\t\tBOOTIF=${x#BOOTIF=}\n\t\t;;\n\thwaddr=*)\n\t\tBOOTIF=${x#hwaddr=}\n\t\t;;\n\tfastboot|fsck.mode=skip)\n\t\tfastboot=y\n\t\t;;\n\tforcefsck|fsck.mode=force)\n\t\tforcefsck=y\n\t\t;;\n\tfsckfix|fsck.repair=yes)\n\t\tfsckfix=y\n\t\t;;\n\tfsck.repair=no)\n\t\tfsckfix=n\n\t\t;;\n\trecovery)\n\t\trecovery=y\n\t\t;;\n\tesac\ndone\n\n# Default to BOOT=local if no boot script defined.\nif [ -z \"${BOOT}\" ]; then\n\tBOOT=local\nfi\n\nif [ -n \"${noresume}\" ] || [ \"$RESUME\" = none ]; then\n\texport noresume=y\n\tunset resume\nelse\n\tresume=${RESUME:-}\nfi\n\nmaybe_break top\n\n# export BOOT variable value for compcache,\n# so we know if we run from casper\nexport BOOT\n\n# Don't do log messages here to avoid confusing graphical boots\nrun_scripts /scripts/init-top\n\nmaybe_break modules\n[ \"$quiet\" != \"y\" ] && log_begin_msg \"Loading essential drivers\"\n[ -n \"${netconsole}\" ] && modprobe netconsole netconsole=\"${netconsole}\"\nload_modules\n[ \"$quiet\" != \"y\" ] && log_end_msg\n\nmaybe_break premount\n[ \"$quiet\" != \"y\" ] && log_begin_msg \"Running /scripts/init-premount\"\nrun_scripts /scripts/init-premount\n[ \"$quiet\" != \"y\" ] && log_end_msg\n\nmaybe_break mount\nlog_begin_msg \"Mounting root file system\"\n# Always load local and nfs (since these might be needed for /etc or\n# /usr, irrespective of the boot script used to mount the rootfs).\n. /scripts/local\n. /scripts/nfs\n. /scripts/${BOOT}\nparse_numeric ${ROOT}\nmaybe_break mountroot\nmount_top\nmount_premount\nmountroot\nlog_end_msg\n\nif read_fstab_entry /usr; then\n\tlog_begin_msg \"Mounting /usr file system\"\n\tmountfs /usr\n\tlog_end_msg\nfi\n\n# Mount cleanup\nmount_bottom\nnfs_bottom\nlocal_bottom\n\nmaybe_break bottom\n[ \"$quiet\" != \"y\" ] && log_begin_msg \"Running /scripts/init-bottom\"\n# We expect udev's init-bottom script to move /dev to ${rootmnt}/dev\nrun_scripts /scripts/init-bottom\n[ \"$quiet\" != \"y\" ] && log_end_msg\n\n# Move /run to the root\nmount -n -o move /run ${rootmnt}/run\n\nvalidate_init() {\n\trun-init -n \"${rootmnt}\" \"${1}\"\n}\n\n# Check init is really there\nif ! validate_init \"$init\"; then\n\techo \"Target filesystem doesn't have requested ${init}.\"\n\tinit=\n\tfor inittest in /sbin/init /etc/init /bin/init /bin/sh; do\n\t\tif validate_init \"${inittest}\"; then\n\t\t\tinit=\"$inittest\"\n\t\t\tbreak\n\t\tfi\n\tdone\nfi\n\n# No init on rootmount\nif ! validate_init \"${init}\" ; then\n\tpanic \"No init found. Try passing init= bootarg.\"\nfi\n\nmaybe_break init\n\n# don't leak too much of env - some init(8) don't clear it\n# (keep init, rootmnt, drop_caps)\nunset debug\nunset MODPROBE_OPTIONS\nunset DPKG_ARCH\nunset ROOTFLAGS\nunset ROOTFSTYPE\nunset ROOTDELAY\nunset ROOT\nunset IP\nunset IP6\nunset BOOT\nunset BOOTIF\nunset UBIMTD\nunset blacklist\nunset break\nunset noresume\nunset panic\nunset quiet\nunset readonly\nunset resume\nunset resume_offset\nunset fastboot\nunset forcefsck\nunset fsckfix\n\n# Move virtual filesystems over to the real filesystem\nmount -n -o move /sys ${rootmnt}/sys\nmount -n -o move /proc ${rootmnt}/proc\n\n# Chain to real filesystem\nexec run-init ${drop_caps} ${rootmnt} ${init} \"$@\" ${recovery:+--startup-event=recovery} <${rootmnt}/dev/console >${rootmnt}/dev/console 2>&1\necho \"Something went badly wrong in the initramfs.\"\npanic \"Please file a bug on initramfs-tools.\"\n```\n\nまたこのinitを実行するタイミングではルートファイルをマウントしていないため、ルートにある/binや/sbinを利用できません。\n\n代わりに、initrd内部の/binや/sbinを利用しています。\n\nそのため、ここにバイナリを配置しておく事で起動中に使用できる様になります。\n\n> **注意**\n> バイナリの実行のために、別途moduleの追加が必要だったりもします。\n\n## initrdを作成する\n\n展開後のファイルが配置されているフォルダで行います。\ncpioによるアーカイブ化、gzipによる圧縮を同時に行い元の状態に戻します。\n\n```bash\n$ find | cpio -o -H newc  | gzip -c > ../initrd.img-4.15.0-54-generic\n```\n\n作成されたinitrdを元の/boot/initrdと入れ替えても起動する事が確認できるかと思います。\n\ninitrdの編集は以上の操作で行います。\n\n## init実行中に処理を止める\n\n/boot/grub/grub.cfgのlinuxオプションが書かれている箇所にbreak=initとオプションを追加する事で処理が停止します。\ninitrd内のデバッグは、このタイミングで一旦止め、initrd内のリソースを使用したコマンド操作が可能です。\n処理を進める場合には、exitコマンドを実行し、続行させる事ができます。\n\n> **注意**\n> HyperV上に起動したLinuxMint19では、このタイミングではコンソールの描画が行われませんでした。\n> そのため実機で行う事をおすすめします。\n","slug":"initrd-unpack-edit-compress","published":1,"updated":"2019-11-14T16:02:17.058Z","_id":"ck2yxz56l000mshzmmcbok2hh","comments":1,"layout":"post","photos":[],"link":"","content":"<p>UbuntuOSベースのシンクライアントを作成していた時、<br>起動時のスプラッシュロゴ表示や、ファイルシステムの復号化処理を行うため、<br>initrd内部の書き換えを行っていました</p>\n<p>なかなかプライベートで触る事は少ないため、書き残しておきます。</p>\n<h1 id=\"環境\"><a href=\"#環境\" class=\"headerlink\" title=\"環境\"></a>環境</h1><ul>\n<li>Linux Mint 19</li>\n</ul>\n<h1 id=\"initrdとは\"><a href=\"#initrdとは\" class=\"headerlink\" title=\"initrdとは\"></a>initrdとは</h1><p>Linuxを起動する際に、各ディストリビューションとして動作するために必要なサービスやドライバが含まれたファイル群を固めた物</p>\n<p>Linuxが起動する時には、基本的に以下の順序で読み込まれていく</p>\n<ul>\n<li>1.UEFI</li>\n<li>2.ブートローダ</li>\n<li>3.カーネル</li>\n<li>4.init</li>\n</ul>\n<p>カーネルを読み込み基本的なコマンドを使用できる状態にしてから、initrdをマウント、initrd内部の/initを実行する</p>\n<p>Linux起動時に黒画面に出現するログは、大半がinitを実行している時に出ている</p>\n<h1 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h1><h2 id=\"initrdを作業ディレクトリにコピーする\"><a href=\"#initrdを作業ディレクトリにコピーする\" class=\"headerlink\" title=\"initrdを作業ディレクトリにコピーする\"></a>initrdを作業ディレクトリにコピーする</h2><p>/bootフォルダ以下に似たような名前のファイルがあるため、それをコピーしてください</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir work <span class=\"comment\"># 作業フォルダ作成</span></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> work</span><br><span class=\"line\">$ cp /boot/initrd.img-4.15.0-54-generic ./initrd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"zcatで復号しつつ、ファイルとして出力\"><a href=\"#zcatで復号しつつ、ファイルとして出力\" class=\"headerlink\" title=\"zcatで復号しつつ、ファイルとして出力\"></a>zcatで復号しつつ、ファイルとして出力</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir initrdfiles</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> initrdfiles</span><br><span class=\"line\">$ zcat ../initrd | cpio -idmv</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ファイルを確認\"><a href=\"#ファイルを確認\" class=\"headerlink\" title=\"ファイルを確認\"></a>ファイルを確認</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ls</span><br><span class=\"line\">bin  conf  etc  init  lib  lib64  run  sbin  scripts  usr  var</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"initを見てみる\"><a href=\"#initを見てみる\" class=\"headerlink\" title=\"initを見てみる\"></a>initを見てみる</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vi init</span><br></pre></td></tr></table></figure>\n\n<p>詳しくは触れませんが、shによって実行できる形で書かれている事がわかります。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Default PATH differs between shells, and is not automatically exported</span></span><br><span class=\"line\"><span class=\"comment\"># by klibc dash.  Make it consistent.</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=/sbin:/usr/sbin:/bin:/usr/bin</span><br><span class=\"line\"></span><br><span class=\"line\">[ -d /dev ] || mkdir -m 0755 /dev</span><br><span class=\"line\">[ -d /root ] || mkdir -m 0700 /root</span><br><span class=\"line\">[ -d /sys ] || mkdir /sys</span><br><span class=\"line\">[ -d /proc ] || mkdir /proc</span><br><span class=\"line\">[ -d /tmp ] || mkdir /tmp</span><br><span class=\"line\">mkdir -p /var/lock</span><br><span class=\"line\">mount -t sysfs -o nodev,noexec,nosuid sysfs /sys</span><br><span class=\"line\">mount -t proc -o nodev,noexec,nosuid proc /proc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\" <span class=\"variable\">$(cat /proc/cmdline)</span> \"</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">*\\ quiet\\ *)</span><br><span class=\"line\">\tquiet=y</span><br><span class=\"line\">\t;;</span><br><span class=\"line\">*)</span><br><span class=\"line\">\tquiet=n</span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"Loading, please wait...\"</span></span><br><span class=\"line\">\t;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> quiet</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Note that this only becomes /dev on the real filesystem if udev's scripts</span></span><br><span class=\"line\"><span class=\"comment\"># are used; which they will be, but it's worth pointing out</span></span><br><span class=\"line\">mount -t devtmpfs -o nosuid,mode=0755 udev /dev</span><br><span class=\"line\">mkdir /dev/pts</span><br><span class=\"line\">mount -t devpts -o noexec,nosuid,gid=5,mode=0620 devpts /dev/pts || <span class=\"literal\">true</span></span><br><span class=\"line\">mount -t tmpfs -o <span class=\"string\">\"noexec,nosuid,size=10%,mode=0755\"</span> tmpfs /run</span><br><span class=\"line\">mkdir -m 0755 /run/initramfs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Export the dpkg architecture</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> DPKG_ARCH=</span><br><span class=\"line\">. /conf/arch.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set modprobe env</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> MODPROBE_OPTIONS=<span class=\"string\">\"-qb\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Export relevant variables</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOT=</span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOTDELAY=</span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOTFLAGS=</span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOTFSTYPE=</span><br><span class=\"line\"><span class=\"built_in\">export</span> IP=</span><br><span class=\"line\"><span class=\"built_in\">export</span> IP6=</span><br><span class=\"line\"><span class=\"built_in\">export</span> BOOT=</span><br><span class=\"line\"><span class=\"built_in\">export</span> BOOTIF=</span><br><span class=\"line\"><span class=\"built_in\">export</span> UBIMTD=</span><br><span class=\"line\"><span class=\"built_in\">export</span> <span class=\"built_in\">break</span>=</span><br><span class=\"line\"><span class=\"built_in\">export</span> init=/sbin/init</span><br><span class=\"line\"><span class=\"built_in\">export</span> <span class=\"built_in\">readonly</span>=y</span><br><span class=\"line\"><span class=\"built_in\">export</span> rootmnt=/root</span><br><span class=\"line\"><span class=\"built_in\">export</span> debug=</span><br><span class=\"line\"><span class=\"built_in\">export</span> panic=</span><br><span class=\"line\"><span class=\"built_in\">export</span> blacklist=</span><br><span class=\"line\"><span class=\"built_in\">export</span> resume=</span><br><span class=\"line\"><span class=\"built_in\">export</span> resume_offset=</span><br><span class=\"line\"><span class=\"built_in\">export</span> drop_caps=</span><br><span class=\"line\"><span class=\"built_in\">export</span> fastboot=n</span><br><span class=\"line\"><span class=\"built_in\">export</span> forcefsck=n</span><br><span class=\"line\"><span class=\"built_in\">export</span> fsckfix=</span><br><span class=\"line\"><span class=\"built_in\">export</span> recovery=</span><br><span class=\"line\"><span class=\"built_in\">export</span> NETWORK_SKIP_ENSLAVED=</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># mdadm needs hostname to be set. This has to be done before the udev rules are called!</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -f <span class=\"string\">\"/etc/hostname\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        /bin/hostname -F /etc/hostname &gt;/dev/null 2&gt;&amp;1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Bring in the main config</span></span><br><span class=\"line\">. /conf/initramfs.conf</span><br><span class=\"line\"><span class=\"keyword\">for</span> conf <span class=\"keyword\">in</span> conf/conf.d/*; <span class=\"keyword\">do</span></span><br><span class=\"line\">\t[ -f <span class=\"variable\">$&#123;conf&#125;</span> ] &amp;&amp; . <span class=\"variable\">$&#123;conf&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\">. /scripts/<span class=\"built_in\">functions</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Parse command line options</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> $(cat /proc/cmdline); <span class=\"keyword\">do</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"variable\">$x</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\tinit=*)</span><br><span class=\"line\">\t\tinit=<span class=\"variable\">$&#123;x#init=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\troot=*)</span><br><span class=\"line\">\t\tROOT=<span class=\"variable\">$&#123;x#root=&#125;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ -z <span class=\"string\">\"<span class=\"variable\">$&#123;BOOT&#125;</span>\"</span> ] &amp;&amp; [ <span class=\"string\">\"<span class=\"variable\">$ROOT</span>\"</span> = <span class=\"string\">\"/dev/nfs\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\tBOOT=nfs</span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">                ;;</span><br><span class=\"line\">\trootflags=*)</span><br><span class=\"line\">\t\tROOTFLAGS=<span class=\"string\">\"-o <span class=\"variable\">$&#123;x#rootflags=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trootfstype=*)</span><br><span class=\"line\">\t\tROOTFSTYPE=<span class=\"string\">\"<span class=\"variable\">$&#123;x#rootfstype=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trootdelay=*)</span><br><span class=\"line\">\t\tROOTDELAY=<span class=\"string\">\"<span class=\"variable\">$&#123;x#rootdelay=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"variable\">$&#123;ROOTDELAY&#125;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t\t*[![:digit:].]*)</span><br><span class=\"line\">\t\t\tROOTDELAY=</span><br><span class=\"line\">\t\t\t;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tresumedelay=*)</span><br><span class=\"line\">\t\tRESUMEDELAY=<span class=\"string\">\"<span class=\"variable\">$&#123;x#resumedelay=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tloop=*)</span><br><span class=\"line\">\t\tLOOP=<span class=\"string\">\"<span class=\"variable\">$&#123;x#loop=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tloopflags=*)</span><br><span class=\"line\">\t\tLOOPFLAGS=<span class=\"string\">\"-o <span class=\"variable\">$&#123;x#loopflags=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tloopfstype=*)</span><br><span class=\"line\">\t\tLOOPFSTYPE=<span class=\"string\">\"<span class=\"variable\">$&#123;x#loopfstype=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tcryptopts=*)</span><br><span class=\"line\">\t\tcryptopts=<span class=\"string\">\"<span class=\"variable\">$&#123;x#cryptopts=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnfsroot=*)</span><br><span class=\"line\">\t\tNFSROOT=<span class=\"string\">\"<span class=\"variable\">$&#123;x#nfsroot=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnetboot=*)</span><br><span class=\"line\">\t\tNETBOOT=<span class=\"string\">\"<span class=\"variable\">$&#123;x#netboot=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tip=*)</span><br><span class=\"line\">\t\tIP=<span class=\"string\">\"<span class=\"variable\">$&#123;x#ip=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tip6=*)</span><br><span class=\"line\">\t\tIP6=<span class=\"string\">\"<span class=\"variable\">$&#123;x#ip6=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tboot=*)</span><br><span class=\"line\">\t\tBOOT=<span class=\"variable\">$&#123;x#boot=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tubi.mtd=*)</span><br><span class=\"line\">\t\tUBIMTD=<span class=\"variable\">$&#123;x#ubi.mtd=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tresume=*)</span><br><span class=\"line\">\t\tRESUME=<span class=\"string\">\"<span class=\"variable\">$&#123;x#resume=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"variable\">$RESUME</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t        UUID=*)</span><br><span class=\"line\">\t\t\tRESUME=<span class=\"string\">\"/dev/disk/by-uuid/<span class=\"variable\">$&#123;RESUME#UUID=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tresume_offset=*)</span><br><span class=\"line\">\t\tresume_offset=<span class=\"string\">\"<span class=\"variable\">$&#123;x#resume_offset=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnoresume)</span><br><span class=\"line\">\t\tnoresume=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tdrop_capabilities=*)</span><br><span class=\"line\">\t\tdrop_caps=<span class=\"string\">\"-d <span class=\"variable\">$&#123;x#drop_capabilities=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tpanic=*)</span><br><span class=\"line\">\t\tpanic=<span class=\"string\">\"<span class=\"variable\">$&#123;x#panic=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"variable\">$&#123;panic&#125;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t\t*[![:digit:].]*)</span><br><span class=\"line\">\t\t\tpanic=</span><br><span class=\"line\">\t\t\t;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tro)</span><br><span class=\"line\">\t\t<span class=\"built_in\">readonly</span>=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trw)</span><br><span class=\"line\">\t\t<span class=\"built_in\">readonly</span>=n</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tdebug)</span><br><span class=\"line\">\t\tdebug=y</span><br><span class=\"line\">\t\tquiet=n</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$&#123;netconsole&#125;</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">exec</span> &gt;/dev/kmsg 2&gt;&amp;1</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">exec</span> &gt;/run/initramfs/initramfs.debug 2&gt;&amp;1</span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">set</span> -x</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tdebug=*)</span><br><span class=\"line\">\t\tdebug=y</span><br><span class=\"line\">\t\tquiet=n</span><br><span class=\"line\">\t\t<span class=\"built_in\">set</span> -x</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\t<span class=\"built_in\">break</span>=*)</span><br><span class=\"line\">\t\t<span class=\"built_in\">break</span>=<span class=\"variable\">$&#123;x#break=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\t<span class=\"built_in\">break</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">break</span>=premount</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tblacklist=*)</span><br><span class=\"line\">\t\tblacklist=<span class=\"variable\">$&#123;x#blacklist=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnetconsole=*)</span><br><span class=\"line\">\t\tnetconsole=<span class=\"variable\">$&#123;x#netconsole=&#125;</span></span><br><span class=\"line\">\t\t[ <span class=\"string\">\"x<span class=\"variable\">$debug</span>\"</span> = <span class=\"string\">\"xy\"</span> ] &amp;&amp; <span class=\"built_in\">exec</span> &gt;/dev/kmsg 2&gt;&amp;1</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tBOOTIF=*)</span><br><span class=\"line\">\t\tBOOTIF=<span class=\"variable\">$&#123;x#BOOTIF=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\thwaddr=*)</span><br><span class=\"line\">\t\tBOOTIF=<span class=\"variable\">$&#123;x#hwaddr=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tfastboot|fsck.mode=skip)</span><br><span class=\"line\">\t\tfastboot=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tforcefsck|fsck.mode=force)</span><br><span class=\"line\">\t\tforcefsck=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tfsckfix|fsck.repair=yes)</span><br><span class=\"line\">\t\tfsckfix=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tfsck.repair=no)</span><br><span class=\"line\">\t\tfsckfix=n</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trecovery)</span><br><span class=\"line\">\t\trecovery=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\t<span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Default to BOOT=local if no boot script defined.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -z <span class=\"string\">\"<span class=\"variable\">$&#123;BOOT&#125;</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\tBOOT=<span class=\"built_in\">local</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$&#123;noresume&#125;</span>\"</span> ] || [ <span class=\"string\">\"<span class=\"variable\">$RESUME</span>\"</span> = none ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t<span class=\"built_in\">export</span> noresume=y</span><br><span class=\"line\">\t<span class=\"built_in\">unset</span> resume</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">\tresume=<span class=\"variable\">$&#123;RESUME:-&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break top</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># export BOOT variable value for compcache,</span></span><br><span class=\"line\"><span class=\"comment\"># so we know if we run from casper</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> BOOT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Don't do log messages here to avoid confusing graphical boots</span></span><br><span class=\"line\">run_scripts /scripts/init-top</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break modules</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_begin_msg <span class=\"string\">\"Loading essential drivers\"</span></span><br><span class=\"line\">[ -n <span class=\"string\">\"<span class=\"variable\">$&#123;netconsole&#125;</span>\"</span> ] &amp;&amp; modprobe netconsole netconsole=<span class=\"string\">\"<span class=\"variable\">$&#123;netconsole&#125;</span>\"</span></span><br><span class=\"line\">load_modules</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break premount</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_begin_msg <span class=\"string\">\"Running /scripts/init-premount\"</span></span><br><span class=\"line\">run_scripts /scripts/init-premount</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break mount</span><br><span class=\"line\">log_begin_msg <span class=\"string\">\"Mounting root file system\"</span></span><br><span class=\"line\"><span class=\"comment\"># Always load local and nfs (since these might be needed for /etc or</span></span><br><span class=\"line\"><span class=\"comment\"># /usr, irrespective of the boot script used to mount the rootfs).</span></span><br><span class=\"line\">. /scripts/<span class=\"built_in\">local</span></span><br><span class=\"line\">. /scripts/nfs</span><br><span class=\"line\">. /scripts/<span class=\"variable\">$&#123;BOOT&#125;</span></span><br><span class=\"line\">parse_numeric <span class=\"variable\">$&#123;ROOT&#125;</span></span><br><span class=\"line\">maybe_break mountroot</span><br><span class=\"line\">mount_top</span><br><span class=\"line\">mount_premount</span><br><span class=\"line\">mountroot</span><br><span class=\"line\">log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> read_fstab_entry /usr; <span class=\"keyword\">then</span></span><br><span class=\"line\">\tlog_begin_msg <span class=\"string\">\"Mounting /usr file system\"</span></span><br><span class=\"line\">\tmountfs /usr</span><br><span class=\"line\">\tlog_end_msg</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Mount cleanup</span></span><br><span class=\"line\">mount_bottom</span><br><span class=\"line\">nfs_bottom</span><br><span class=\"line\">local_bottom</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break bottom</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_begin_msg <span class=\"string\">\"Running /scripts/init-bottom\"</span></span><br><span class=\"line\"><span class=\"comment\"># We expect udev's init-bottom script to move /dev to $&#123;rootmnt&#125;/dev</span></span><br><span class=\"line\">run_scripts /scripts/init-bottom</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Move /run to the root</span></span><br><span class=\"line\">mount -n -o move /run <span class=\"variable\">$&#123;rootmnt&#125;</span>/run</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">validate_init</span></span>() &#123;</span><br><span class=\"line\">\trun-init -n <span class=\"string\">\"<span class=\"variable\">$&#123;rootmnt&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;1&#125;</span>\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Check init is really there</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ! validate_init <span class=\"string\">\"<span class=\"variable\">$init</span>\"</span>; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"Target filesystem doesn't have requested <span class=\"variable\">$&#123;init&#125;</span>.\"</span></span><br><span class=\"line\">\tinit=</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> inittest <span class=\"keyword\">in</span> /sbin/init /etc/init /bin/init /bin/sh; <span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> validate_init <span class=\"string\">\"<span class=\"variable\">$&#123;inittest&#125;</span>\"</span>; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\tinit=<span class=\"string\">\"<span class=\"variable\">$inittest</span>\"</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">break</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t<span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># No init on rootmount</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ! validate_init <span class=\"string\">\"<span class=\"variable\">$&#123;init&#125;</span>\"</span> ; <span class=\"keyword\">then</span></span><br><span class=\"line\">\tpanic <span class=\"string\">\"No init found. Try passing init= bootarg.\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break init</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># don't leak too much of env - some init(8) don't clear it</span></span><br><span class=\"line\"><span class=\"comment\"># (keep init, rootmnt, drop_caps)</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> debug</span><br><span class=\"line\"><span class=\"built_in\">unset</span> MODPROBE_OPTIONS</span><br><span class=\"line\"><span class=\"built_in\">unset</span> DPKG_ARCH</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOTFLAGS</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOTFSTYPE</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOTDELAY</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOT</span><br><span class=\"line\"><span class=\"built_in\">unset</span> IP</span><br><span class=\"line\"><span class=\"built_in\">unset</span> IP6</span><br><span class=\"line\"><span class=\"built_in\">unset</span> BOOT</span><br><span class=\"line\"><span class=\"built_in\">unset</span> BOOTIF</span><br><span class=\"line\"><span class=\"built_in\">unset</span> UBIMTD</span><br><span class=\"line\"><span class=\"built_in\">unset</span> blacklist</span><br><span class=\"line\"><span class=\"built_in\">unset</span> <span class=\"built_in\">break</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> noresume</span><br><span class=\"line\"><span class=\"built_in\">unset</span> panic</span><br><span class=\"line\"><span class=\"built_in\">unset</span> quiet</span><br><span class=\"line\"><span class=\"built_in\">unset</span> <span class=\"built_in\">readonly</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> resume</span><br><span class=\"line\"><span class=\"built_in\">unset</span> resume_offset</span><br><span class=\"line\"><span class=\"built_in\">unset</span> fastboot</span><br><span class=\"line\"><span class=\"built_in\">unset</span> forcefsck</span><br><span class=\"line\"><span class=\"built_in\">unset</span> fsckfix</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Move virtual filesystems over to the real filesystem</span></span><br><span class=\"line\">mount -n -o move /sys <span class=\"variable\">$&#123;rootmnt&#125;</span>/sys</span><br><span class=\"line\">mount -n -o move /proc <span class=\"variable\">$&#123;rootmnt&#125;</span>/proc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Chain to real filesystem</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> run-init <span class=\"variable\">$&#123;drop_caps&#125;</span> <span class=\"variable\">$&#123;rootmnt&#125;</span> <span class=\"variable\">$&#123;init&#125;</span> <span class=\"string\">\"<span class=\"variable\">$@</span>\"</span> <span class=\"variable\">$&#123;recovery:+--startup-event=recovery&#125;</span> &lt;<span class=\"variable\">$&#123;rootmnt&#125;</span>/dev/console &gt;<span class=\"variable\">$&#123;rootmnt&#125;</span>/dev/console 2&gt;&amp;1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Something went badly wrong in the initramfs.\"</span></span><br><span class=\"line\">panic <span class=\"string\">\"Please file a bug on initramfs-tools.\"</span></span><br></pre></td></tr></table></figure>\n\n<p>またこのinitを実行するタイミングではルートファイルをマウントしていないため、ルートにある/binや/sbinを利用できません。</p>\n<p>代わりに、initrd内部の/binや/sbinを利用しています。</p>\n<p>そのため、ここにバイナリを配置しておく事で起動中に使用できる様になります。</p>\n<blockquote>\n<p><strong>注意</strong><br>バイナリの実行のために、別途moduleの追加が必要だったりもします。</p>\n</blockquote>\n<h2 id=\"initrdを作成する\"><a href=\"#initrdを作成する\" class=\"headerlink\" title=\"initrdを作成する\"></a>initrdを作成する</h2><p>展開後のファイルが配置されているフォルダで行います。<br>cpioによるアーカイブ化、gzipによる圧縮を同時に行い元の状態に戻します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ find | cpio -o -H newc  | gzip -c &gt; ../initrd.img-4.15.0-54-generic</span><br></pre></td></tr></table></figure>\n\n<p>作成されたinitrdを元の/boot/initrdと入れ替えても起動する事が確認できるかと思います。</p>\n<p>initrdの編集は以上の操作で行います。</p>\n<h2 id=\"init実行中に処理を止める\"><a href=\"#init実行中に処理を止める\" class=\"headerlink\" title=\"init実行中に処理を止める\"></a>init実行中に処理を止める</h2><p>/boot/grub/grub.cfgのlinuxオプションが書かれている箇所にbreak=initとオプションを追加する事で処理が停止します。<br>initrd内のデバッグは、このタイミングで一旦止め、initrd内のリソースを使用したコマンド操作が可能です。<br>処理を進める場合には、exitコマンドを実行し、続行させる事ができます。</p>\n<blockquote>\n<p><strong>注意</strong><br>HyperV上に起動したLinuxMint19では、このタイミングではコンソールの描画が行われませんでした。<br>そのため実機で行う事をおすすめします。</p>\n</blockquote>\n","site":{"data":{}},"excerpt":"","more":"<p>UbuntuOSベースのシンクライアントを作成していた時、<br>起動時のスプラッシュロゴ表示や、ファイルシステムの復号化処理を行うため、<br>initrd内部の書き換えを行っていました</p>\n<p>なかなかプライベートで触る事は少ないため、書き残しておきます。</p>\n<h1 id=\"環境\"><a href=\"#環境\" class=\"headerlink\" title=\"環境\"></a>環境</h1><ul>\n<li>Linux Mint 19</li>\n</ul>\n<h1 id=\"initrdとは\"><a href=\"#initrdとは\" class=\"headerlink\" title=\"initrdとは\"></a>initrdとは</h1><p>Linuxを起動する際に、各ディストリビューションとして動作するために必要なサービスやドライバが含まれたファイル群を固めた物</p>\n<p>Linuxが起動する時には、基本的に以下の順序で読み込まれていく</p>\n<ul>\n<li>1.UEFI</li>\n<li>2.ブートローダ</li>\n<li>3.カーネル</li>\n<li>4.init</li>\n</ul>\n<p>カーネルを読み込み基本的なコマンドを使用できる状態にしてから、initrdをマウント、initrd内部の/initを実行する</p>\n<p>Linux起動時に黒画面に出現するログは、大半がinitを実行している時に出ている</p>\n<h1 id=\"手順\"><a href=\"#手順\" class=\"headerlink\" title=\"手順\"></a>手順</h1><h2 id=\"initrdを作業ディレクトリにコピーする\"><a href=\"#initrdを作業ディレクトリにコピーする\" class=\"headerlink\" title=\"initrdを作業ディレクトリにコピーする\"></a>initrdを作業ディレクトリにコピーする</h2><p>/bootフォルダ以下に似たような名前のファイルがあるため、それをコピーしてください</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir work <span class=\"comment\"># 作業フォルダ作成</span></span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> work</span><br><span class=\"line\">$ cp /boot/initrd.img-4.15.0-54-generic ./initrd</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"zcatで復号しつつ、ファイルとして出力\"><a href=\"#zcatで復号しつつ、ファイルとして出力\" class=\"headerlink\" title=\"zcatで復号しつつ、ファイルとして出力\"></a>zcatで復号しつつ、ファイルとして出力</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir initrdfiles</span><br><span class=\"line\">$ <span class=\"built_in\">cd</span> initrdfiles</span><br><span class=\"line\">$ zcat ../initrd | cpio -idmv</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"ファイルを確認\"><a href=\"#ファイルを確認\" class=\"headerlink\" title=\"ファイルを確認\"></a>ファイルを確認</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ ls</span><br><span class=\"line\">bin  conf  etc  init  lib  lib64  run  sbin  scripts  usr  var</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"initを見てみる\"><a href=\"#initを見てみる\" class=\"headerlink\" title=\"initを見てみる\"></a>initを見てみる</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ vi init</span><br></pre></td></tr></table></figure>\n\n<p>詳しくは触れませんが、shによって実行できる形で書かれている事がわかります。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/sh</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Default PATH differs between shells, and is not automatically exported</span></span><br><span class=\"line\"><span class=\"comment\"># by klibc dash.  Make it consistent.</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> PATH=/sbin:/usr/sbin:/bin:/usr/bin</span><br><span class=\"line\"></span><br><span class=\"line\">[ -d /dev ] || mkdir -m 0755 /dev</span><br><span class=\"line\">[ -d /root ] || mkdir -m 0700 /root</span><br><span class=\"line\">[ -d /sys ] || mkdir /sys</span><br><span class=\"line\">[ -d /proc ] || mkdir /proc</span><br><span class=\"line\">[ -d /tmp ] || mkdir /tmp</span><br><span class=\"line\">mkdir -p /var/lock</span><br><span class=\"line\">mount -t sysfs -o nodev,noexec,nosuid sysfs /sys</span><br><span class=\"line\">mount -t proc -o nodev,noexec,nosuid proc /proc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">case</span> <span class=\"string\">\" <span class=\"variable\">$(cat /proc/cmdline)</span> \"</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">*\\ quiet\\ *)</span><br><span class=\"line\">\tquiet=y</span><br><span class=\"line\">\t;;</span><br><span class=\"line\">*)</span><br><span class=\"line\">\tquiet=n</span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"Loading, please wait...\"</span></span><br><span class=\"line\">\t;;</span><br><span class=\"line\"><span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> quiet</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Note that this only becomes /dev on the real filesystem if udev's scripts</span></span><br><span class=\"line\"><span class=\"comment\"># are used; which they will be, but it's worth pointing out</span></span><br><span class=\"line\">mount -t devtmpfs -o nosuid,mode=0755 udev /dev</span><br><span class=\"line\">mkdir /dev/pts</span><br><span class=\"line\">mount -t devpts -o noexec,nosuid,gid=5,mode=0620 devpts /dev/pts || <span class=\"literal\">true</span></span><br><span class=\"line\">mount -t tmpfs -o <span class=\"string\">\"noexec,nosuid,size=10%,mode=0755\"</span> tmpfs /run</span><br><span class=\"line\">mkdir -m 0755 /run/initramfs</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Export the dpkg architecture</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> DPKG_ARCH=</span><br><span class=\"line\">. /conf/arch.conf</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Set modprobe env</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> MODPROBE_OPTIONS=<span class=\"string\">\"-qb\"</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Export relevant variables</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOT=</span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOTDELAY=</span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOTFLAGS=</span><br><span class=\"line\"><span class=\"built_in\">export</span> ROOTFSTYPE=</span><br><span class=\"line\"><span class=\"built_in\">export</span> IP=</span><br><span class=\"line\"><span class=\"built_in\">export</span> IP6=</span><br><span class=\"line\"><span class=\"built_in\">export</span> BOOT=</span><br><span class=\"line\"><span class=\"built_in\">export</span> BOOTIF=</span><br><span class=\"line\"><span class=\"built_in\">export</span> UBIMTD=</span><br><span class=\"line\"><span class=\"built_in\">export</span> <span class=\"built_in\">break</span>=</span><br><span class=\"line\"><span class=\"built_in\">export</span> init=/sbin/init</span><br><span class=\"line\"><span class=\"built_in\">export</span> <span class=\"built_in\">readonly</span>=y</span><br><span class=\"line\"><span class=\"built_in\">export</span> rootmnt=/root</span><br><span class=\"line\"><span class=\"built_in\">export</span> debug=</span><br><span class=\"line\"><span class=\"built_in\">export</span> panic=</span><br><span class=\"line\"><span class=\"built_in\">export</span> blacklist=</span><br><span class=\"line\"><span class=\"built_in\">export</span> resume=</span><br><span class=\"line\"><span class=\"built_in\">export</span> resume_offset=</span><br><span class=\"line\"><span class=\"built_in\">export</span> drop_caps=</span><br><span class=\"line\"><span class=\"built_in\">export</span> fastboot=n</span><br><span class=\"line\"><span class=\"built_in\">export</span> forcefsck=n</span><br><span class=\"line\"><span class=\"built_in\">export</span> fsckfix=</span><br><span class=\"line\"><span class=\"built_in\">export</span> recovery=</span><br><span class=\"line\"><span class=\"built_in\">export</span> NETWORK_SKIP_ENSLAVED=</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># mdadm needs hostname to be set. This has to be done before the udev rules are called!</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -f <span class=\"string\">\"/etc/hostname\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        /bin/hostname -F /etc/hostname &gt;/dev/null 2&gt;&amp;1</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Bring in the main config</span></span><br><span class=\"line\">. /conf/initramfs.conf</span><br><span class=\"line\"><span class=\"keyword\">for</span> conf <span class=\"keyword\">in</span> conf/conf.d/*; <span class=\"keyword\">do</span></span><br><span class=\"line\">\t[ -f <span class=\"variable\">$&#123;conf&#125;</span> ] &amp;&amp; . <span class=\"variable\">$&#123;conf&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\">. /scripts/<span class=\"built_in\">functions</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Parse command line options</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> x <span class=\"keyword\">in</span> $(cat /proc/cmdline); <span class=\"keyword\">do</span></span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"variable\">$x</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\tinit=*)</span><br><span class=\"line\">\t\tinit=<span class=\"variable\">$&#123;x#init=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\troot=*)</span><br><span class=\"line\">\t\tROOT=<span class=\"variable\">$&#123;x#root=&#125;</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ -z <span class=\"string\">\"<span class=\"variable\">$&#123;BOOT&#125;</span>\"</span> ] &amp;&amp; [ <span class=\"string\">\"<span class=\"variable\">$ROOT</span>\"</span> = <span class=\"string\">\"/dev/nfs\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\tBOOT=nfs</span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">                ;;</span><br><span class=\"line\">\trootflags=*)</span><br><span class=\"line\">\t\tROOTFLAGS=<span class=\"string\">\"-o <span class=\"variable\">$&#123;x#rootflags=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trootfstype=*)</span><br><span class=\"line\">\t\tROOTFSTYPE=<span class=\"string\">\"<span class=\"variable\">$&#123;x#rootfstype=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trootdelay=*)</span><br><span class=\"line\">\t\tROOTDELAY=<span class=\"string\">\"<span class=\"variable\">$&#123;x#rootdelay=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"variable\">$&#123;ROOTDELAY&#125;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t\t*[![:digit:].]*)</span><br><span class=\"line\">\t\t\tROOTDELAY=</span><br><span class=\"line\">\t\t\t;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tresumedelay=*)</span><br><span class=\"line\">\t\tRESUMEDELAY=<span class=\"string\">\"<span class=\"variable\">$&#123;x#resumedelay=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tloop=*)</span><br><span class=\"line\">\t\tLOOP=<span class=\"string\">\"<span class=\"variable\">$&#123;x#loop=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tloopflags=*)</span><br><span class=\"line\">\t\tLOOPFLAGS=<span class=\"string\">\"-o <span class=\"variable\">$&#123;x#loopflags=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tloopfstype=*)</span><br><span class=\"line\">\t\tLOOPFSTYPE=<span class=\"string\">\"<span class=\"variable\">$&#123;x#loopfstype=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tcryptopts=*)</span><br><span class=\"line\">\t\tcryptopts=<span class=\"string\">\"<span class=\"variable\">$&#123;x#cryptopts=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnfsroot=*)</span><br><span class=\"line\">\t\tNFSROOT=<span class=\"string\">\"<span class=\"variable\">$&#123;x#nfsroot=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnetboot=*)</span><br><span class=\"line\">\t\tNETBOOT=<span class=\"string\">\"<span class=\"variable\">$&#123;x#netboot=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tip=*)</span><br><span class=\"line\">\t\tIP=<span class=\"string\">\"<span class=\"variable\">$&#123;x#ip=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tip6=*)</span><br><span class=\"line\">\t\tIP6=<span class=\"string\">\"<span class=\"variable\">$&#123;x#ip6=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tboot=*)</span><br><span class=\"line\">\t\tBOOT=<span class=\"variable\">$&#123;x#boot=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tubi.mtd=*)</span><br><span class=\"line\">\t\tUBIMTD=<span class=\"variable\">$&#123;x#ubi.mtd=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tresume=*)</span><br><span class=\"line\">\t\tRESUME=<span class=\"string\">\"<span class=\"variable\">$&#123;x#resume=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"variable\">$RESUME</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t        UUID=*)</span><br><span class=\"line\">\t\t\tRESUME=<span class=\"string\">\"/dev/disk/by-uuid/<span class=\"variable\">$&#123;RESUME#UUID=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tresume_offset=*)</span><br><span class=\"line\">\t\tresume_offset=<span class=\"string\">\"<span class=\"variable\">$&#123;x#resume_offset=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnoresume)</span><br><span class=\"line\">\t\tnoresume=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tdrop_capabilities=*)</span><br><span class=\"line\">\t\tdrop_caps=<span class=\"string\">\"-d <span class=\"variable\">$&#123;x#drop_capabilities=&#125;</span>\"</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tpanic=*)</span><br><span class=\"line\">\t\tpanic=<span class=\"string\">\"<span class=\"variable\">$&#123;x#panic=&#125;</span>\"</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">case</span> <span class=\"variable\">$&#123;panic&#125;</span> <span class=\"keyword\">in</span></span><br><span class=\"line\">\t\t*[![:digit:].]*)</span><br><span class=\"line\">\t\t\tpanic=</span><br><span class=\"line\">\t\t\t;;</span><br><span class=\"line\">\t\t<span class=\"keyword\">esac</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tro)</span><br><span class=\"line\">\t\t<span class=\"built_in\">readonly</span>=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trw)</span><br><span class=\"line\">\t\t<span class=\"built_in\">readonly</span>=n</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tdebug)</span><br><span class=\"line\">\t\tdebug=y</span><br><span class=\"line\">\t\tquiet=n</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$&#123;netconsole&#125;</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">exec</span> &gt;/dev/kmsg 2&gt;&amp;1</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">exec</span> &gt;/run/initramfs/initramfs.debug 2&gt;&amp;1</span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t\t<span class=\"built_in\">set</span> -x</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tdebug=*)</span><br><span class=\"line\">\t\tdebug=y</span><br><span class=\"line\">\t\tquiet=n</span><br><span class=\"line\">\t\t<span class=\"built_in\">set</span> -x</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\t<span class=\"built_in\">break</span>=*)</span><br><span class=\"line\">\t\t<span class=\"built_in\">break</span>=<span class=\"variable\">$&#123;x#break=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\t<span class=\"built_in\">break</span>)</span><br><span class=\"line\">\t\t<span class=\"built_in\">break</span>=premount</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tblacklist=*)</span><br><span class=\"line\">\t\tblacklist=<span class=\"variable\">$&#123;x#blacklist=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tnetconsole=*)</span><br><span class=\"line\">\t\tnetconsole=<span class=\"variable\">$&#123;x#netconsole=&#125;</span></span><br><span class=\"line\">\t\t[ <span class=\"string\">\"x<span class=\"variable\">$debug</span>\"</span> = <span class=\"string\">\"xy\"</span> ] &amp;&amp; <span class=\"built_in\">exec</span> &gt;/dev/kmsg 2&gt;&amp;1</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tBOOTIF=*)</span><br><span class=\"line\">\t\tBOOTIF=<span class=\"variable\">$&#123;x#BOOTIF=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\thwaddr=*)</span><br><span class=\"line\">\t\tBOOTIF=<span class=\"variable\">$&#123;x#hwaddr=&#125;</span></span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tfastboot|fsck.mode=skip)</span><br><span class=\"line\">\t\tfastboot=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tforcefsck|fsck.mode=force)</span><br><span class=\"line\">\t\tforcefsck=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tfsckfix|fsck.repair=yes)</span><br><span class=\"line\">\t\tfsckfix=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\tfsck.repair=no)</span><br><span class=\"line\">\t\tfsckfix=n</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\trecovery)</span><br><span class=\"line\">\t\trecovery=y</span><br><span class=\"line\">\t\t;;</span><br><span class=\"line\">\t<span class=\"keyword\">esac</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Default to BOOT=local if no boot script defined.</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -z <span class=\"string\">\"<span class=\"variable\">$&#123;BOOT&#125;</span>\"</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\tBOOT=<span class=\"built_in\">local</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ -n <span class=\"string\">\"<span class=\"variable\">$&#123;noresume&#125;</span>\"</span> ] || [ <span class=\"string\">\"<span class=\"variable\">$RESUME</span>\"</span> = none ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t<span class=\"built_in\">export</span> noresume=y</span><br><span class=\"line\">\t<span class=\"built_in\">unset</span> resume</span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">\tresume=<span class=\"variable\">$&#123;RESUME:-&#125;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break top</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># export BOOT variable value for compcache,</span></span><br><span class=\"line\"><span class=\"comment\"># so we know if we run from casper</span></span><br><span class=\"line\"><span class=\"built_in\">export</span> BOOT</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Don't do log messages here to avoid confusing graphical boots</span></span><br><span class=\"line\">run_scripts /scripts/init-top</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break modules</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_begin_msg <span class=\"string\">\"Loading essential drivers\"</span></span><br><span class=\"line\">[ -n <span class=\"string\">\"<span class=\"variable\">$&#123;netconsole&#125;</span>\"</span> ] &amp;&amp; modprobe netconsole netconsole=<span class=\"string\">\"<span class=\"variable\">$&#123;netconsole&#125;</span>\"</span></span><br><span class=\"line\">load_modules</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break premount</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_begin_msg <span class=\"string\">\"Running /scripts/init-premount\"</span></span><br><span class=\"line\">run_scripts /scripts/init-premount</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break mount</span><br><span class=\"line\">log_begin_msg <span class=\"string\">\"Mounting root file system\"</span></span><br><span class=\"line\"><span class=\"comment\"># Always load local and nfs (since these might be needed for /etc or</span></span><br><span class=\"line\"><span class=\"comment\"># /usr, irrespective of the boot script used to mount the rootfs).</span></span><br><span class=\"line\">. /scripts/<span class=\"built_in\">local</span></span><br><span class=\"line\">. /scripts/nfs</span><br><span class=\"line\">. /scripts/<span class=\"variable\">$&#123;BOOT&#125;</span></span><br><span class=\"line\">parse_numeric <span class=\"variable\">$&#123;ROOT&#125;</span></span><br><span class=\"line\">maybe_break mountroot</span><br><span class=\"line\">mount_top</span><br><span class=\"line\">mount_premount</span><br><span class=\"line\">mountroot</span><br><span class=\"line\">log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> read_fstab_entry /usr; <span class=\"keyword\">then</span></span><br><span class=\"line\">\tlog_begin_msg <span class=\"string\">\"Mounting /usr file system\"</span></span><br><span class=\"line\">\tmountfs /usr</span><br><span class=\"line\">\tlog_end_msg</span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Mount cleanup</span></span><br><span class=\"line\">mount_bottom</span><br><span class=\"line\">nfs_bottom</span><br><span class=\"line\">local_bottom</span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break bottom</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_begin_msg <span class=\"string\">\"Running /scripts/init-bottom\"</span></span><br><span class=\"line\"><span class=\"comment\"># We expect udev's init-bottom script to move /dev to $&#123;rootmnt&#125;/dev</span></span><br><span class=\"line\">run_scripts /scripts/init-bottom</span><br><span class=\"line\">[ <span class=\"string\">\"<span class=\"variable\">$quiet</span>\"</span> != <span class=\"string\">\"y\"</span> ] &amp;&amp; log_end_msg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Move /run to the root</span></span><br><span class=\"line\">mount -n -o move /run <span class=\"variable\">$&#123;rootmnt&#125;</span>/run</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"title\">validate_init</span></span>() &#123;</span><br><span class=\"line\">\trun-init -n <span class=\"string\">\"<span class=\"variable\">$&#123;rootmnt&#125;</span>\"</span> <span class=\"string\">\"<span class=\"variable\">$&#123;1&#125;</span>\"</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Check init is really there</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ! validate_init <span class=\"string\">\"<span class=\"variable\">$init</span>\"</span>; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t<span class=\"built_in\">echo</span> <span class=\"string\">\"Target filesystem doesn't have requested <span class=\"variable\">$&#123;init&#125;</span>.\"</span></span><br><span class=\"line\">\tinit=</span><br><span class=\"line\">\t<span class=\"keyword\">for</span> inittest <span class=\"keyword\">in</span> /sbin/init /etc/init /bin/init /bin/sh; <span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> validate_init <span class=\"string\">\"<span class=\"variable\">$&#123;inittest&#125;</span>\"</span>; <span class=\"keyword\">then</span></span><br><span class=\"line\">\t\t\tinit=<span class=\"string\">\"<span class=\"variable\">$inittest</span>\"</span></span><br><span class=\"line\">\t\t\t<span class=\"built_in\">break</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">fi</span></span><br><span class=\"line\">\t<span class=\"keyword\">done</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># No init on rootmount</span></span><br><span class=\"line\"><span class=\"keyword\">if</span> ! validate_init <span class=\"string\">\"<span class=\"variable\">$&#123;init&#125;</span>\"</span> ; <span class=\"keyword\">then</span></span><br><span class=\"line\">\tpanic <span class=\"string\">\"No init found. Try passing init= bootarg.\"</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">maybe_break init</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># don't leak too much of env - some init(8) don't clear it</span></span><br><span class=\"line\"><span class=\"comment\"># (keep init, rootmnt, drop_caps)</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> debug</span><br><span class=\"line\"><span class=\"built_in\">unset</span> MODPROBE_OPTIONS</span><br><span class=\"line\"><span class=\"built_in\">unset</span> DPKG_ARCH</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOTFLAGS</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOTFSTYPE</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOTDELAY</span><br><span class=\"line\"><span class=\"built_in\">unset</span> ROOT</span><br><span class=\"line\"><span class=\"built_in\">unset</span> IP</span><br><span class=\"line\"><span class=\"built_in\">unset</span> IP6</span><br><span class=\"line\"><span class=\"built_in\">unset</span> BOOT</span><br><span class=\"line\"><span class=\"built_in\">unset</span> BOOTIF</span><br><span class=\"line\"><span class=\"built_in\">unset</span> UBIMTD</span><br><span class=\"line\"><span class=\"built_in\">unset</span> blacklist</span><br><span class=\"line\"><span class=\"built_in\">unset</span> <span class=\"built_in\">break</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> noresume</span><br><span class=\"line\"><span class=\"built_in\">unset</span> panic</span><br><span class=\"line\"><span class=\"built_in\">unset</span> quiet</span><br><span class=\"line\"><span class=\"built_in\">unset</span> <span class=\"built_in\">readonly</span></span><br><span class=\"line\"><span class=\"built_in\">unset</span> resume</span><br><span class=\"line\"><span class=\"built_in\">unset</span> resume_offset</span><br><span class=\"line\"><span class=\"built_in\">unset</span> fastboot</span><br><span class=\"line\"><span class=\"built_in\">unset</span> forcefsck</span><br><span class=\"line\"><span class=\"built_in\">unset</span> fsckfix</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Move virtual filesystems over to the real filesystem</span></span><br><span class=\"line\">mount -n -o move /sys <span class=\"variable\">$&#123;rootmnt&#125;</span>/sys</span><br><span class=\"line\">mount -n -o move /proc <span class=\"variable\">$&#123;rootmnt&#125;</span>/proc</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Chain to real filesystem</span></span><br><span class=\"line\"><span class=\"built_in\">exec</span> run-init <span class=\"variable\">$&#123;drop_caps&#125;</span> <span class=\"variable\">$&#123;rootmnt&#125;</span> <span class=\"variable\">$&#123;init&#125;</span> <span class=\"string\">\"<span class=\"variable\">$@</span>\"</span> <span class=\"variable\">$&#123;recovery:+--startup-event=recovery&#125;</span> &lt;<span class=\"variable\">$&#123;rootmnt&#125;</span>/dev/console &gt;<span class=\"variable\">$&#123;rootmnt&#125;</span>/dev/console 2&gt;&amp;1</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">\"Something went badly wrong in the initramfs.\"</span></span><br><span class=\"line\">panic <span class=\"string\">\"Please file a bug on initramfs-tools.\"</span></span><br></pre></td></tr></table></figure>\n\n<p>またこのinitを実行するタイミングではルートファイルをマウントしていないため、ルートにある/binや/sbinを利用できません。</p>\n<p>代わりに、initrd内部の/binや/sbinを利用しています。</p>\n<p>そのため、ここにバイナリを配置しておく事で起動中に使用できる様になります。</p>\n<blockquote>\n<p><strong>注意</strong><br>バイナリの実行のために、別途moduleの追加が必要だったりもします。</p>\n</blockquote>\n<h2 id=\"initrdを作成する\"><a href=\"#initrdを作成する\" class=\"headerlink\" title=\"initrdを作成する\"></a>initrdを作成する</h2><p>展開後のファイルが配置されているフォルダで行います。<br>cpioによるアーカイブ化、gzipによる圧縮を同時に行い元の状態に戻します。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ find | cpio -o -H newc  | gzip -c &gt; ../initrd.img-4.15.0-54-generic</span><br></pre></td></tr></table></figure>\n\n<p>作成されたinitrdを元の/boot/initrdと入れ替えても起動する事が確認できるかと思います。</p>\n<p>initrdの編集は以上の操作で行います。</p>\n<h2 id=\"init実行中に処理を止める\"><a href=\"#init実行中に処理を止める\" class=\"headerlink\" title=\"init実行中に処理を止める\"></a>init実行中に処理を止める</h2><p>/boot/grub/grub.cfgのlinuxオプションが書かれている箇所にbreak=initとオプションを追加する事で処理が停止します。<br>initrd内のデバッグは、このタイミングで一旦止め、initrd内のリソースを使用したコマンド操作が可能です。<br>処理を進める場合には、exitコマンドを実行し、続行させる事ができます。</p>\n<blockquote>\n<p><strong>注意</strong><br>HyperV上に起動したLinuxMint19では、このタイミングではコンソールの描画が行われませんでした。<br>そのため実機で行う事をおすすめします。</p>\n</blockquote>\n"}],"PostAsset":[],"PostCategory":[],"PostTag":[{"post_id":"ck2yxz53t0003shzmmgnvpl0h","tag_id":"ck2yxz53v0005shzmwbi6czyg","_id":"ck2yxz540000ashzml5evdsur"},{"post_id":"ck2yxz53u0004shzmimqy4isz","tag_id":"ck2yxz5400009shzm7z62rjmw","_id":"ck2yxz541000cshzmme7483w4"},{"post_id":"ck2yxz53w0006shzmunb5lsbx","tag_id":"ck2yxz541000bshzmnzo64ojl","_id":"ck2yxz542000eshzms2umhh96"},{"post_id":"ck2yxz53x0007shzmdwdj6g19","tag_id":"ck2yxz542000dshzmbrx54hoq","_id":"ck2yxz543000ishzm91hrzkyx"},{"post_id":"ck2yxz53x0007shzmdwdj6g19","tag_id":"ck2yxz542000fshzm13xqm8r2","_id":"ck2yxz543000jshzmrxlrwa51"},{"post_id":"ck2yxz53x0007shzmdwdj6g19","tag_id":"ck2yxz543000gshzmbaob6av7","_id":"ck2yxz543000kshzmpqq9lvf4"},{"post_id":"ck2yxz53z0008shzmn13vso6r","tag_id":"ck2yxz543000hshzmvru3vwo5","_id":"ck2yxz543000lshzme7ulfr6y"},{"post_id":"ck2yxz56l000mshzmmcbok2hh","tag_id":"ck2yxz542000fshzm13xqm8r2","_id":"ck2yxz56o000oshzmb6zg3asp"},{"post_id":"ck2yxz56l000mshzmmcbok2hh","tag_id":"ck2yxz56n000nshzm9b1vl0m2","_id":"ck2yxz56o000pshzmvuuqvxkn"}],"Tag":[{"name":"Git","_id":"ck2yxz53v0005shzmwbi6czyg"},{"name":"GitHub","_id":"ck2yxz5400009shzm7z62rjmw"},{"name":"php","_id":"ck2yxz541000bshzmnzo64ojl"},{"name":"Debian","_id":"ck2yxz542000dshzmbrx54hoq"},{"name":"Linux","_id":"ck2yxz542000fshzm13xqm8r2"},{"name":"timedatectl","_id":"ck2yxz543000gshzmbaob6av7"},{"name":"vagrant","_id":"ck2yxz543000hshzmvru3vwo5"},{"name":"init","_id":"ck2yxz56n000nshzm9b1vl0m2"}]}}